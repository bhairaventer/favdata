{"version":3,"file":"static/js/194.2163edd0.chunk.js","mappings":"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","sources":["component/products/Purchase.js"],"sourcesContent":["import axios from 'axios';\r\nimport { useContext, useEffect, useRef, useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport DataContext from '../usecontext/DataContext';\r\nimport { FaArrowAltCircleLeft,FaArrowAltCircleRight } from \"react-icons/fa\";\r\n\r\nexport default  function Purchase (params) {\r\n\r\n    const { fetchSinglePurchase} = useContext(DataContext);\r\n\r\n     const apiKey = process.env.REACT_APP_API_KEY\r\n \r\n    const [data, setData] = useState([]);\r\n const [loading, setLoading] = useState(true);\r\nconst [error, setError] = useState(null);\r\nconst [currentPage, setCurrentPage] = useState(1);\r\nconst [totalOrder, settotalOrder] = useState(\"\");\r\nconst [hasMore, setHasMore] = useState(true);\r\nuseEffect(() => {\r\n    fetchpurchase(currentPage)\r\n}, []);\r\n\r\n\r\n\r\nconst Previous = () => {\r\n    if (currentPage > 1) {\r\n      setCurrentPage((prevPage) => {\r\n        const newPage = prevPage - 1;\r\n  \r\n         fetchpurchase(newPage);\r\n        return newPage;\r\n      });\r\n    }\r\n  };\r\n  \r\n  const Next = () => {\r\n    if( Math.ceil(totalOrder/20)){}\r\n    if (hasMore) {\r\n      setCurrentPage((prevPage) => {\r\n        const newPage = prevPage + 1;\r\n         fetchpurchase(newPage);\r\n        return newPage;\r\n      });\r\n    }\r\n  };\r\n  const numclick = (number) => {\r\n     \r\n    if (hasMore) {\r\n      setCurrentPage((prevPage) => {\r\n        const newPage = number\r\n         fetchpurchase(newPage);\r\n        return newPage;\r\n      });\r\n    }\r\n  };\r\n  \r\n\r\n \r\n\r\n\r\n\r\n  const fetchpurchase = async (page, searchQuery = \"\") => {\r\n    let token = localStorage.getItem(\"token\");\r\n  \r\n    try {\r\n      const response = await axios.get(`${apiKey}/api/purchase/fetchpurchase/${page}`, {\r\n        method: 'GET',\r\n        headers: {\r\n          'authtoken': token\r\n        },\r\n        params: {\r\n          search: searchQuery  // Pass the search query as a parameter\r\n        }\r\n      });\r\n  \r\n      settotalOrder(response.data.totalCount);\r\n  \r\n      if (response.data.purchase.length === 0) {\r\n        setHasMore(false); // No more data to load\r\n        setData(response.data);\r\n      } else {\r\n        setData(response.data);\r\n        setHasMore(true);\r\n      }\r\n  \r\n      setLoading(false);\r\n    } catch (error) {\r\n      setError(error);\r\n      setLoading(false);\r\n    }\r\n  };\r\n  \r\n\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n \r\n\r\n  const handleSearch = (e) => {\r\n    setSearchQuery(e.target.value);\r\n    fetchpurchase(1, e.target.value); // Call fetchproduct with the search term\r\n  };\r\n  \r\n \r\n  \r\n\r\n const range = (start, end, step = 1) => {\r\n    const result = [];\r\n    for (let i = start; i < end; i += step) {\r\n      result.push(i);\r\n    }\r\n    return result;\r\n  };\r\n  \r\n  \r\n  const totalPages = Math.ceil(totalOrder / 20);\r\n  const containerRef = useRef(null);\r\n  const [scrollPosition, setScrollPosition] = useState(0);\r\n  const pageWidth = 50; \r\n  const scrollLeft = () => {\r\n    if (containerRef.current) {\r\n      const newPosition = scrollPosition - pageWidth;\r\n      setScrollPosition(newPosition);\r\n      containerRef.current.scrollTo({ left: newPosition, behavior: \"smooth\" });\r\n    }\r\n  };\r\n  \r\n  const scrollRight = () => {\r\n    if (containerRef.current) {\r\n      const newPosition = scrollPosition + pageWidth;\r\n      setScrollPosition(newPosition);\r\n      containerRef.current.scrollTo({ left: newPosition, behavior: \"smooth\" });\r\n    }\r\n  };  \r\nif (loading) return <p>Loading...</p>;\r\nif (error) return <p>Error: {error.message}</p>;\r\n\r\n     return(\r\n        <>\r\n        <div className=\" \">\r\n        <div className=\"relative mt-4\">\r\n  <input\r\n    type=\"text\"\r\n    placeholder=\"Search Purchase...\"\r\n    value={searchQuery}\r\n    onChange={handleSearch}\r\n    className=\"w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-200 ease-in-out\"\r\n  />\r\n  \r\n  <svg\r\n    className=\"absolute top-1/2 right-3 transform -translate-y-1/2 w-5 h-5 text-gray-500\"\r\n    fill=\"none\"\r\n    stroke=\"currentColor\"\r\n    viewBox=\"0 0 24 24\"\r\n    xmlns=\"http://www.w3.org/2000/svg\"\r\n  >\r\n    <path\r\n      strokeLinecap=\"round\"\r\n      strokeLinejoin=\"round\"\r\n      strokeWidth=\"2\"\r\n      d=\"M11 4a7 7 0 011.2 13.794m1.2-1.794a7 7 0 01-1.2-13.794m1.2 13.794a7 7 0 100-14 7 7 0 000 14z\"\r\n    />\r\n  </svg>\r\n</div>\r\n\r\n\r\n{/* Render your purchase data here */}\r\n\r\n         <div className=\"  mt-4 lg:w-full w-[1000px] h-[500px] overflow-y-scroll\">\r\n            <div className=\"bg-[#464646] flex   text-white mb-2  px-2 items-center justify-between\">\r\n                <div className=\" border-white  px-3 py-1  w-[160px] \">Bill Date</div>\r\n                <div className=\" border-l-[1px]  border-white w-[120px]  px-3 py-1 \">Bill No</div>\r\n                <div className=\" border-white border-l-[1px] px-3 py-1  w-[160px] \">supplier</div>\r\n                <div className=\"border-l-[1px] border-white w-[130px]  px-3 py-1 \">Amount</div>\r\n                  \r\n                 \r\n            </div> \r\n \r\n            {data?.purchase?.map((person) => {\r\n                 \r\n\r\n                let total = 0\r\n                person?.name.forEach(purchase => {\r\n                  total += parseInt(purchase.amount)\r\n                  //console.log(purchase.amount);\r\n                });\r\n\r\n                const date = new Date(person?.billdate);\r\n                const options = { year: 'numeric', month: '2-digit', day: '2-digit', };\r\n            let newdate = date.toLocaleDateString('en-IN', options);\r\n            newdate = newdate.split('/').join('-');\r\n                return( \r\n                    <Link key={person._id} onClick={()=>{fetchSinglePurchase(person._id)}} to='../SinglePurchase' className=\"rounded-full   child cursor-pointer\">\r\n                    <div className=\"bg-[#f2f2f2] flex mt-1  text-black cursor-pointer px-2 justify-between items-center \">\r\n                <div className=\"  px-3 py-1  w-[160px] \">{newdate}</div>\r\n                <div className=\" w-[120px]  px-3 py-1 \">{person?.billno}</div>\r\n                <div className=\"  px-3 py-1  w-[160px] \">{person?.Supplier} </div>\r\n                <div className=\" w-[130px]  px-3 py-1 \">{total}</div>\r\n                   \r\n            </div></Link>)})}\r\n         \r\n         </div>\r\n         <div className=\"    absolute md:w-[80%]  lg:w-[85%]   w-[90%] mt-10    \">\r\n        <div className=\"text-white w-[100%] pb-5 flex gap-10 justify-center \">\r\n          {currentPage !== 1 ?<button   onClick={()=>{Previous()}} className=\"bg-blue-600 hover:bg-blue-700 w-[120px]  flex    justify-center cursor-pointer px-3 rounded-md \"> <div className=\"flex items-center gap-2\"><FaArrowAltCircleLeft /> Previous</div></button>:\r\n          <button disabled  onClick={()=>{Previous()}} className=\"bg-blue-400   w-[120px]  flex    justify-center cursor-pointer px-3 rounded-md \"> <div className=\"flex items-center gap-2\"><FaArrowAltCircleLeft /> Previous</div></button>}\r\n<div className=\"text-black border-black border-[1px] px-2 rounded-md\">{currentPage}</div>\r\n         { currentPage !== Math.ceil(totalOrder/20)  && totalOrder !== 0 ?  <button onClick={()=>{Next()}} className=\"bg-blue-600 hover:bg-blue-700 w-[120px]  flex    justify-center cursor-pointer px-3 rounded-md \"> <div className=\"flex items-center gap-2\">Next<FaArrowAltCircleRight /></div> </button>:\r\n          <button disabled onClick={()=>{Next()}} className=\"bg-blue-400   w-[120px]  flex    justify-center cursor-pointer px-3 rounded-md \"> <div className=\"flex items-center gap-2\">Next<FaArrowAltCircleRight /></div> </button>}\r\n        </div>\r\n        <div className=\"w-[100%] pb-5 flex gap-10  justify-center \">\r\n        \r\n\r\n        <div className=\"flex items-center\">\r\n      {/* Scroll Left Button */}\r\n      <button\r\n        onClick={scrollLeft}\r\n        className=\"bg-blue-600 hover:bg-blue-700 text-white px-3 mb-2 py-1 rounded-md mr-2\"\r\n        disabled={scrollPosition <= 0}\r\n      >\r\n        &lt;\r\n      </button>\r\n\r\n      {/* Scroll Container */}\r\n      <div\r\n        ref={containerRef}\r\n        className=\"relative overflow-x-auto hide-scrollbar\"\r\n        style={{ maxWidth: \"150px\", whiteSpace: \"nowrap\" }}\r\n      >\r\n        <div className=\"flex gap-2\">\r\n          {range(1, totalPages+1).map(number => (\r\n            <div onClick={()=>{numclick(number)}}\r\n              key={number}\r\n              className=\"border-black text-center cursor-pointer border-[1px] px-2\"\r\n              style={{ width: pageWidth }}\r\n            >\r\n              {number}\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Scroll Right Button */}\r\n      <button\r\n        onClick={scrollRight}\r\n        className=\"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 mb-2 rounded-md ml-2\"\r\n        disabled={scrollPosition >= (containerRef.current?.scrollWidth - containerRef.current?.clientWidth)}\r\n      >\r\n        &gt;\r\n      </button>\r\n    </div>\r\n        </div>\r\n        </div>\r\n        </div>\r\n        </>\r\n    )\r\n}\r\n\r\n"],"names":["Purchase","params","_data$purchase","_containerRef$current","_containerRef$current2","fetchSinglePurchase","useContext","DataContext","data","setData","useState","loading","setLoading","error","setError","currentPage","setCurrentPage","totalOrder","settotalOrder","hasMore","setHasMore","useEffect","fetchpurchase","Previous","prevPage","newPage","Next","Math","ceil","async","page","searchQuery","arguments","length","undefined","token","localStorage","getItem","response","axios","get","method","headers","search","totalCount","purchase","setSearchQuery","totalPages","containerRef","useRef","scrollPosition","setScrollPosition","_jsx","children","_jsxs","message","_Fragment","className","type","placeholder","value","onChange","e","target","fill","stroke","viewBox","xmlns","strokeLinecap","strokeLinejoin","strokeWidth","d","map","person","total","name","forEach","parseInt","amount","newdate","Date","billdate","toLocaleDateString","year","month","day","split","join","Link","onClick","_id","to","billno","Supplier","FaArrowAltCircleLeft","disabled","FaArrowAltCircleRight","scrollLeft","current","newPosition","scrollTo","left","behavior","ref","style","maxWidth","whiteSpace","start","end","step","result","i","push","range","number","numclick","width","scrollRight","scrollWidth","clientWidth"],"sourceRoot":""}