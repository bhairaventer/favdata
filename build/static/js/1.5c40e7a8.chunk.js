"use strict";(self.webpackChunkfooter=self.webpackChunkfooter||[]).push([[1],[,(e,t,s)=>{s.r(t),s.d(t,{default:()=>i});var a=s(6213),r=s(5043),l=s(5475),d=s(2684),c=s(579);function i(){var e;const{updateOrderStatus:t,userrole:s,setexceldata:i,setsingleorderid:o}=(0,r.useContext)(d.A),{fetchSinglePurchase:n,setsummary:p,searcheddata:x,date:h}=(0,r.useContext)(d.A),[u,m]=(0,r.useState)(""),[w,b]=(0,r.useState)(""),[N,j]=(0,r.useState)(!1),[v,g]=(0,r.useState)(1),[y,S]=(0,r.useState)(1),[f,k]=(0,r.useState)(0),[_,C]=(0,r.useState)(0),[D,P]=(0,r.useState)(!0),[A,L]=(0,r.useState)(!0),[I,M]=(0,r.useState)([]),[O,$]=(0,r.useState)(!0),[E,R]=(0,r.useState)(null),[X,B]=(0,r.useState)([]),[Q,z]=(0,r.useState)("masterSearch"),[F,q]=((0,r.useRef)(null),(0,r.useState)(0)),G="https://bwithf.onrender.com",[H,J]=(0,r.useState)([]),[K,T]=(0,r.useState)(!1),[U,V]=(0,r.useState)(null),[W,Y]=(0,r.useState)(1),[Z,ee]=(0,r.useState)(1),[te,se]=(0,r.useState)(1),[ae,re]=(0,r.useState)(!0),[le,de]=(0,r.useState)(!0),[ce,ie]=(0,r.useState)(!0);(0,r.useEffect)((()=>{"masterSearch"===Q?oe(W):"purchaseData"===Q?ne(Z):"productData"===Q&&pe(te)}),[h,x,Q,W,Z,te]);const oe=async e=>{try{$(!0);const t={authtoken:localStorage.getItem("token")},s=await a.A.get(`${G}/api/order/mastersearch/${e}`,{headers:t,params:{name:x,startDate:h.startDate,endDate:h.endDate}});k(s.data.totalDocuments),M((e=>[...e,...s.data.results])),re(s.data.results.length>0),$(!1),i(s.data.results)}catch(E){R(E),$(!1)}},ne=async e=>{const t=localStorage.getItem("token");try{$(!0);const s=await a.A.get(`${G}/api/purchase/fetchpurchase/${e}`,{headers:{authtoken:t},params:{search:x}});C(s.data.totalCount),B((e=>({...e,purchase:[...e.purchase||[],...s.data.purchase]}))),de(s.data.purchase.length>0),$(!1)}catch(E){R(E),$(!1)}},pe=async e=>{const t=localStorage.getItem("token");try{T(!0);const s=await a.A.get(`${G}/api/product/fetchproductforadmin/${e}`,{headers:{authtoken:t},params:{search:x}});J((e=>[...e,...s.data.products])),T(!1),ie(s.data.products.length>0)}catch(E){V(E),T(!1)}};Math.ceil(f/20),Math.ceil(_/20);return O?(0,c.jsx)("div",{children:"Loading..."}):E?(0,c.jsxs)("div",{children:["Error: ",E.message]}):(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)("div",{className:"md:w-[85%] lg:w-[90%] w-full px-5 mt-16",children:[(0,c.jsxs)("div",{className:"flex justify-between text-white w-full bg-gray-800 p-3 rounded-md shadow-lg mb-4",children:[(0,c.jsx)("div",{className:"lg:text-xl text-lg font-semibold",children:"Orders"}),(0,c.jsxs)("div",{className:"flex lg:space-x-4 lg:text-sm text-xs space-x-2",children:[(0,c.jsx)(l.N_,{to:"/",children:"Dashboard"}),(0,c.jsx)(l.N_,{to:"/home/reports",children:"Reports"}),(0,c.jsx)("div",{children:"All Shipment"})]})]}),(0,c.jsxs)("div",{className:"bg-white rounded-md shadow-lg p-6",children:[(0,c.jsxs)("div",{className:"flex justify-between mb-4",children:[(0,c.jsx)("button",{onClick:()=>z("masterSearch"),className:"py-2 px-4 rounded-md "+("masterSearch"===Q?"bg-blue-500 text-white":"bg-gray-200"),children:"Order Data      "}),(0,c.jsx)("button",{onClick:()=>z("productData"),className:"py-2 px-4 rounded-md "+("productData"===Q?"bg-blue-500 text-white":"bg-gray-200"),children:"Product Data"}),(0,c.jsx)("button",{onClick:()=>z("purchaseData"),className:"py-2 px-4 rounded-md "+("purchaseData"===Q?"bg-blue-500 text-white":"bg-gray-200"),children:"Purchase Data"})]}),"masterSearch"===Q&&(0,c.jsx)("div",{className:"scroll-container pb-3",style:{overflowX:"auto"},children:(0,c.jsxs)("div",{className:"mt-4 w-[1200px] h-[600px]",children:[(0,c.jsxs)("div",{className:"bg-gray-800 flex text-white mb-2 justify-between px-2 items-center text-xs font-semibold rounded-t-md",children:[(0,c.jsx)("div",{className:"w-[100px] px-3 py-2",children:"Status"}),(0,c.jsx)("div",{className:"border-l border-white w-[130px] px-3 py-2",children:"Order ID"}),(0,c.jsx)("div",{className:"border-l border-white w-[120px] px-3 py-2",children:"Product"}),(0,c.jsx)("div",{className:"border-l border-white w-[120px] px-3 py-2",children:"Quantity"}),(0,c.jsx)("div",{className:"border-l border-white w-[120px] px-3 py-2",children:"Amount"}),(0,c.jsx)("div",{className:"border-l border-white w-[150px] px-3 py-2",children:"State"}),(0,c.jsx)("div",{className:"border-l border-white w-[180px] px-3 py-2",children:"Platform"})]}),I.map((e=>{var t;return(0,c.jsxs)("div",{className:"bg-gray-100 flex justify-between text-black px-2 items-center text-sm",children:[(0,c.jsx)(l.N_,{onClick:()=>o(e._id),to:"/home/Searchpage",className:"w-[100px] px-3 py-2",children:e.status}),(0,c.jsx)(l.N_,{onClick:()=>o(e._id),to:"/home/Searchpage",className:"w-[130px] overflow-x-scroll px-3 py-2",children:e.OrderId}),(0,c.jsx)(l.N_,{onClick:()=>o(e._id),to:"/home/Searchpage",className:"w-[120px] px-3 py-2",children:e.Product}),(0,c.jsx)(l.N_,{onClick:()=>o(e._id),to:"/home/Searchpage",className:"w-[120px] px-3 py-2",children:e.Quntity}),(0,c.jsx)(l.N_,{onClick:()=>o(e._id),to:"/home/Searchpage",className:"w-[120px] px-3 py-2",children:e.Salesamount}),(0,c.jsx)(l.N_,{onClick:()=>o(e._id),to:"/home/Searchpage",className:"w-[150px] px-3 py-2",children:e.State}),(0,c.jsx)(l.N_,{onClick:()=>o(e._id),to:"/home/Searchpage",className:"w-[180px] px-3 py-2",children:null===e||void 0===e||null===(t=e.Platform)||void 0===t?void 0:t.name})]},e._id)})),O&&(0,c.jsx)("div",{children:"Loading..."}),ae&&!O&&(0,c.jsx)("button",{onClick:()=>Y((e=>e+1)),children:"Load More"})]})}),"purchaseData"===Q&&(0,c.jsx)("div",{className:"mt-4",children:(0,c.jsx)("div",{className:"scroll-container pb-3",style:{overflowX:"auto"},children:(0,c.jsxs)("div",{className:"mt-4 lg:w-full w-[1000px]",children:[(0,c.jsxs)("div",{className:"bg-[#464646] flex text-white mb-2 px-2 items-center justify-between",children:[(0,c.jsx)("div",{className:"border-white px-3 py-1 w-[160px]",children:"Bill Date"}),(0,c.jsx)("div",{className:"border-l-[1px] border-white w-[120px] px-3 py-1",children:"Bill No"}),(0,c.jsx)("div",{className:"border-white border-l-[1px] px-3 py-1 w-[160px]",children:"Supplier"}),(0,c.jsx)("div",{className:"border-l-[1px] border-white w-[130px] px-3 py-1",children:"Amount"})]}),null===X||void 0===X||null===(e=X.purchase)||void 0===e?void 0:e.map((e=>{var t;let s=0;null===e||void 0===e||null===(t=e.name)||void 0===t||t.forEach((e=>s+=parseInt(e.amount)));const a=new Date(null===e||void 0===e?void 0:e.billdate).toLocaleDateString("en-IN",{year:"numeric",month:"2-digit",day:"2-digit"}).split("/").join("-");return(0,c.jsx)(l.N_,{onClick:()=>n(e._id),to:"../products/SinglePurchase",className:"rounded-full child cursor-pointer",children:(0,c.jsxs)("div",{className:"bg-[#f2f2f2] flex mt-1 text-black cursor-pointer px-2 justify-between items-center",children:[(0,c.jsx)("div",{className:"px-3 py-1 w-[160px]",children:a}),(0,c.jsx)("div",{className:"w-[120px] px-3 py-1",children:null===e||void 0===e?void 0:e.billno}),(0,c.jsx)("div",{className:"px-3 py-1 w-[160px]",children:null===e||void 0===e?void 0:e.Supplier}),(0,c.jsx)("div",{className:"w-[130px] px-3 py-1",children:s})]})},e._id)})),O&&(0,c.jsx)("div",{children:"Loading..."}),le&&!O&&(0,c.jsx)("button",{onClick:()=>ee((e=>e+1)),children:"Load More"})]})})}),"productData"===Q&&(0,c.jsx)("div",{className:"mt-4",children:(0,c.jsxs)("div",{className:"scroll-container pb-3",style:{overflowX:"auto"},children:[K&&(0,c.jsx)("div",{children:"Loading products..."}),U&&(0,c.jsxs)("div",{children:["Error: ",U.message]}),(0,c.jsxs)("div",{className:"mt-4 lg:w-full w-[1000px]",children:[(0,c.jsxs)("div",{className:"bg-[#464646] flex text-white mb-2 px-2 items-center justify-between",children:[(0,c.jsx)("div",{className:" border-white  px-3 py-1  w-[160px] ",children:"Product Name"}),(0,c.jsx)("div",{className:" border-white border-l-[1px] px-3 py-1  w-[160px] ",children:"Category"}),(0,c.jsx)("div",{className:" border-l-[1px]  border-white w-[80px]  px-3 py-1 ",children:"MRP"}),(0,c.jsx)("div",{className:"border-l-[1px] border-white w-[130px]  px-3 py-1 ",children:"Saling price"}),(0,c.jsx)("div",{className:"border-l-[1px] border-white w-[100px]  px-3 py-1 ",children:"NewOrder"}),(0,c.jsx)("div",{className:"border-l-[1px] border-white w-[70px]  px-3 py-1 ",children:"Available"}),(0,c.jsx)("div",{className:"border-l-[1px] border-white w-[130px]  px-3 py-1 ",children:"In stock"}),(0,c.jsx)("div",{className:"border-l-[1px] border-white w-[130px]  px-3 py-1 ",children:"damage"})]}),null===H||void 0===H?void 0:H.map((e=>{var t,s;let a=e.purchasestock,r=e.totalsale;return NaN!==a&&0!=a&&a||(a=0),NaN!==r&&0!=r&&r||(r=0),(0,c.jsxs)("div",{className:"bg-[#f2f2f2] flex mt-3   text-black  px-2 justify-between items-center ",children:[(0,c.jsx)(l.N_,{onClick:()=>{p(e)},to:"../products/Singleproduct",className:"  px-3 py-1  w-[170px] ",children:e.name}),(0,c.jsxs)(l.N_,{onClick:()=>{p(e)},to:"../products/Singleproduct",className:"  px-3 py-1  w-[170px] ",children:[null!==e&&void 0!==e&&null!==(t=e.category[0])&&void 0!==t&&t.name?null===e||void 0===e||null===(s=e.category[0])||void 0===s?void 0:s.name:e.category," "]}),(0,c.jsx)(l.N_,{onClick:()=>{p(e)},to:"../products/Singleproduct",className:" w-[80px]  px-3 py-1 ",children:null===e||void 0===e?void 0:e.MRP}),(0,c.jsx)(l.N_,{onClick:()=>{p(e)},to:"../products/Singleproduct",className:" w-[130px]  px-3 py-1 ",children:e.salingprice}),(0,c.jsx)(l.N_,{onClick:()=>{p(e)},to:"../products/Singleproduct",className:" w-[100px]  px-3 py-1 ",children:e.ordercome}),(0,c.jsx)(l.N_,{onClick:()=>{p(e)},to:"../products/Singleproduct",className:" w-[70px]  px-3 py-1 ",children:a-r-e.ordercome}),(0,c.jsx)(l.N_,{onClick:()=>{p(e)},to:"../products/Singleproduct",className:" w-[130px]  px-3 py-1 ",children:a-r}),(0,c.jsx)(l.N_,{onClick:()=>{p(e)},to:"../products/Singleproduct",className:"border-l-[1px] border-white w-[90px]  px-3 py-1 ",children:void 0==e.totalDamaged?0:e.totalDamaged}),(0,c.jsx)("div",{className:" sticky right-0 flex   bg-black bottom-1 z-10"})]},e._id)})),K&&(0,c.jsx)("div",{children:"Loading products..."}),U&&(0,c.jsxs)("div",{children:["Error: ",U.message]}),H.length>0&&(0,c.jsx)("button",{onClick:()=>se((e=>e+1)),children:"Load More"})]})]})})]})]})})}}]]);
//# sourceMappingURL=1.5c40e7a8.chunk.js.map