"use strict";(self.webpackChunkfooter=self.webpackChunkfooter||[]).push([[789],{9789:(e,t,r)=>{r.r(t),r.d(t,{default:()=>c});var s=r(6213),l=r(5043),a=r(7149),i=r(2684),o=r(5369),d=r(5475),n=r(579);function c(e){var t,r,c,x;const{updateOrderStatus:p,setexceldata:u,setsingleorderid:h}=(0,l.useContext)(i.A),m="http://127.0.0.1:5000",[b,v]=(0,l.useState)(""),[j,f]=(0,l.useState)(""),[g,w]=(0,l.useState)(!1),[N,y]=(0,l.useState)(!0),[k,S]=(0,l.useState)([]),[C,_]=(0,l.useState)([]),[O,T]=(0,l.useState)(null),[R,$]=(0,l.useState)(1),[P,L]=(0,l.useState)(""),[E,D]=(0,l.useState)(!0);let[I,A]=(0,l.useState)({billno:"",billdate:"",LRNO:"",shippingcharges:"",Trackingid:"",Courier:"",Deliverybydate:"",Retrunstatus:"",Condition:""});(0,l.useEffect)((()=>{M(R)}),[]);const Q=()=>{R>1&&$((e=>{const t=e-1;return M(t),t}))},z=()=>{Math.ceil(P/10),E&&$((e=>{const t=e+1;return M(t),t}))},M=async e=>{try{const r={authtoken:localStorage.getItem("token")},l=await s.A.get(`${m}/api/order/fetchallordersforadmin/DTO/${e}`,{headers:r});var t;if(L(l.data.totalOrder),0===l.data.orders.length)D(!1),_(l.data);else u(null===l||void 0===l||null===(t=l.data)||void 0===t?void 0:t.orders),_(l.data),D(!0);y(!1)}catch(O){T(O),y(!1)}},[U,W]=(0,l.useState)(null),[Y,B]=(0,l.useState)(""),[F,H]=(0,l.useState)("");let J=(e,t)=>{v(e),S(t.returnserial),B(t.productdata),w(!0),H(t.Quntity),f(t._id)},q=async(e,t)=>{console.log(G.length),0!==G.length?(console.log(G),te(G),await p(e,t,I)):(!async function(e,t){let r=localStorage.getItem("token");try{const s=await fetch(`${m}/api/order/matchproductids/${t}/${I.Condition}`,{method:"POST",headers:{"Content-Type":"application/json",authtoken:r},body:JSON.stringify({productIds:e})});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);return await s.json()}catch(O){throw console.error("Error:",O),O}}(Z,t),await p(e,t,I)),M(R)};const[G,K]=(0,l.useState)([]),[V,X]=(0,l.useState)(""),[Z,ee]=(0,l.useState)({});async function te(e){try{let t=localStorage.getItem("token");const r=await fetch(`${m}/api/order/matchserialnum/${j}/${I.Condition}`,{method:"POST",headers:{"Content-Type":"application/json",authtoken:t},body:JSON.stringify({serialNumbers:e})});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);return await r.json()}catch(O){throw console.error("Error:",O),O}}const re=Math.ceil(P/10),se=(0,l.useRef)(null),[le,ae]=(0,l.useState)(0),ie=e=>{A({...I,[e.target.name]:e.target.value})};return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:" ",children:[g&&"Received"==b&&(0,n.jsx)("div",{className:" flex justify-center ",children:(0,n.jsxs)("div",{className:"w-[40%] bg-white shadow-xl shadow-gray-300 z-20 border-[1px] border-gray-300 py-5 my-6 rounded-md  absolute",children:[(0,n.jsx)("div",{onClick:()=>{w(!1)},className:"rounded-full cursor-pointer w-6 h-6 inline-block  ml-2  text-center justify-self-center border-black border-[1px] ",children:(0,n.jsx)("div",{className:"relative bottom-[7px] text-[20px]",children:"x"})}),(0,n.jsx)("div",{className:"flex justify-center py-2",children:(0,n.jsx)("div",{children:"Update some info"})}),(0,n.jsxs)("div",{className:"grid    md:grid-cols-1 text-black  px-2 gap-2 md:gap-3 items-center",children:[(0,n.jsxs)("select",{name:"Retrunstatus",onChange:ie,value:I.Retrunstatus,className:"px-3 py-1 border-black border-[2px] rounded-md",children:[(0,n.jsx)("option",{value:"Retrunstatus",children:"Retrunstatus"}),(0,n.jsx)("option",{value:"YES",children:"YES  "},"YES"),(0,n.jsx)("option",{value:"NO",children:"NO"},"NO")]}),(0,n.jsxs)("select",{name:"Condition",onChange:ie,value:I.Condition,className:"px-3 py-1 border-black border-[2px] rounded-md",children:[(0,n.jsx)("option",{value:"Condition",children:"Condition"}),(0,n.jsx)("option",{value:"ok",children:"Ok  "},"ok"),(0,n.jsx)("option",{value:"damaged",children:"Damaged"},"damaged"),(0,n.jsx)("option",{value:"partial",children:"Partial"},"partial"),(0,n.jsx)("option",{value:"fraud",children:"Fraud"},"fraud")]}),k?(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{children:"Serial Number Manager"}),(0,n.jsx)("input",{type:"text",value:V,onChange:e=>X(e.target.value),placeholder:"Enter serial number"}),(0,n.jsx)("button",{onClick:()=>{V&&k.includes(V)&&!G.includes(V)&&(K((e=>[...e,V])),X(""))},children:"Add Serial Number"}),(0,n.jsx)("ul",{children:null===G||void 0===G?void 0:G.map((e=>(0,n.jsxs)("li",{children:[e,(0,n.jsx)("button",{onClick:()=>{return t=e,void K((e=>e.filter((e=>e!==t))));var t},children:"Remove"})]},e)))})]}):(0,n.jsx)("div",{children:(0,n.jsx)("form",{className:"flex gap-2 flex-wrap",children:null===Y||void 0===Y?void 0:Y.map((e=>(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsxs)("label",{children:[(0,n.jsx)("input",{type:"checkbox",checked:void 0!==Z[e._id],onChange:()=>(e=>{ee((t=>{if(t[e]){const{[e]:r,...s}=t;return s}return{...t,[e]:1}}))})(e._id)}),e.name]}),void 0!==Z[e._id]&&(0,n.jsx)("input",{type:"number",value:Z[e._id],onChange:t=>((e,t)=>{F>=t&&ee((r=>({...r,[e]:t})))})(e._id,Number(t.target.value)),min:"1"})]},e._id)))})})]}),(0,n.jsx)("div",{className:"flex justify-center mt-1",children:(0,n.jsx)("button",{className:"text-[16px] bg-blue-600 rounded-full w-[50%] items-center mt-3  text-white px-2 py-[3px]",onClick:()=>{q(b,j)},children:"Update"})})]})}),(0,n.jsxs)("div",{className:"  mt-4 w-[1350px] h-[510px]",children:[(0,n.jsxs)("div",{className:"bg-[#464646] flex  sticky top-3 z-20 text-white mb-2  px-2 items-center ",children:[(0,n.jsx)("div",{className:" border-white  px-3 py-1  w-[160px] ",children:"Platform"}),(0,n.jsx)("div",{className:"border-l-[1px] border-white w-[120px]  px-3 py-1 ",children:"Bill NO"}),(0,n.jsx)("div",{className:"border-l-[1px] border-white w-[130px]  px-3 py-1 ",children:"Order Id"}),(0,n.jsx)("div",{className:"border-l-[1px] border-white w-[100px]  px-3 py-1 ",children:"Product"}),(0,n.jsx)("div",{className:"border-l-[1px] border-white w-[130px]  px-3 py-1 ",children:"Quntity"}),(0,n.jsx)("div",{className:"border-l-[1px] border-white w-[150px]  px-3 py-1 ",children:"Amount"}),(0,n.jsx)("div",{className:"border-l-[1px] border-white w-[100px]  px-3 py-1 ",children:"State"}),(0,n.jsx)("div",{className:"border-l-[1px] border-white w-[120px]  px-3 py-1 ",children:"Courier"}),(0,n.jsx)("div",{className:"border-l-[1px] border-white w-[180px]  px-3 py-1 ",children:"Tracking Id"}),(0,n.jsx)("div",{className:"border-l-[1px] border-white w-[120px]  px-3 py-1 ",children:"LR no."}),(0,n.jsx)("div",{className:"border-l-[1px] border-white w-[160px]  px-3 py-1 ",children:"DTO Date"})]}),null===C||void 0===C||null===(t=C.orders)||void 0===t?void 0:t.map((e=>{var t;let r=new Date(e.DTOdate).toLocaleDateString("en-IN",{year:"numeric",month:"2-digit",day:"2-digit"});return r=r.split("/").join("-"),(0,n.jsxs)("div",{className:"bg-[#f2f2f2] flex   text-black  px-2  items-center ",children:[(0,n.jsxs)(d.N_,{to:"/home/Searchpage",onClick:()=>h(e._id),className:" px-3 py-1 overflow-x-auto w-[160px] ",children:[null===(t=e.Platform)||void 0===t?void 0:t.name," "]}),(0,n.jsx)(d.N_,{to:"/home/Searchpage",onClick:()=>h(e._id),className:" w-[120px] overflow-x-auto px-3 py-1 ",children:e.Billno}),(0,n.jsx)(d.N_,{to:"/home/Searchpage",onClick:()=>h(e._id),className:" w-[130px] overflow-x-auto px-3 py-1 ",children:e.OrderId}),(0,n.jsx)(d.N_,{to:"/home/Searchpage",onClick:()=>h(e._id),className:" w-[100px] overflow-x-auto px-3 py-1 ",children:e.Product}),(0,n.jsx)(d.N_,{to:"/home/Searchpage",onClick:()=>h(e._id),className:" w-[100px] overflow-x-auto px-3 py-1 ",children:e.Quntity}),(0,n.jsx)(d.N_,{to:"/home/Searchpage",onClick:()=>h(e._id),className:" w-[150px] overflow-x-auto px-3 py-1 ",children:e.Salesamount}),(0,n.jsx)(d.N_,{to:"/home/Searchpage",onClick:()=>h(e._id),className:" w-[100px] overflow-x-auto px-3 py-1 ",children:e.State}),(0,n.jsx)(d.N_,{to:"/home/Searchpage",onClick:()=>h(e._id),className:" w-[180px] overflow-x-auto px-3 py-1 ",children:e.courier}),(0,n.jsx)(d.N_,{to:"/home/Searchpage",onClick:()=>h(e._id),className:" w-[140px] overflow-x-auto px-3 py-1 ",children:e.trackingnumber}),(0,n.jsx)(d.N_,{to:"/home/Searchpage",onClick:()=>h(e._id),className:" w-[120px] overflow-x-auto px-3 py-1 ",children:e.Lrno}),(0,n.jsx)(d.N_,{to:"/home/Searchpage",onClick:()=>h(e._id),className:" w-[160px] overflow-x-auto px-3 py-1 ",children:r}),U===e._id&&(0,n.jsx)("div",{className:" sticky right-0 flex gap-2     z-10",children:(0,n.jsxs)("div",{className:" top-[-19px]  absolute right-28  bg-white  border-black border-[1px] p-2  ",children:[(0,n.jsxs)("div",{className:"opstion  ",children:[(0,n.jsx)("option",{className:`text-[12px] cursor-pointer ${"Received"==b&&"bg-blue-400"}`,onClick:()=>{J("Received",e._id)},value:"pending",children:"Received"}),(0,n.jsx)("option",{className:`text-[12px] cursor-pointer ${"Lost"==b&&"bg-blue-400"}`,onClick:()=>{J("Lost",e._id)},value:"canceled",children:"Lost"})]}),"Lost"==b&&(0,n.jsx)("div",{className:"flex justify-center mt-1",children:(0,n.jsx)("button",{className:"text-[10px] bg-blue-600 rounded-full   items-center   text-white px-2  ",onClick:()=>{q(b,j)},children:"Update"})})]})}),(0,n.jsx)("div",{className:" sticky right-0 flex gap-2  bottom-2 z-10",children:(0,n.jsx)("div",{className:"bg-black rounded-full w-6 h-6 flex justify-center items-center  absolute bottom-3 right-16 text-white     text-[16px]  ",onClick:()=>(e=>{W((t=>t===e?null:e))})(e._id),children:(0,n.jsx)(a.Qxc,{})})})]},e._id)}))]}),(0,n.jsxs)("div",{className:"    absolute md:w-[80%]  lg:w-[85%]   w-[90%] mt-10    ",children:[(0,n.jsxs)("div",{className:"text-white w-[100%] pb-5 flex gap-10 justify-center ",children:[1!==R?(0,n.jsxs)("button",{onClick:()=>{Q()},className:"bg-blue-600 hover:bg-blue-700 w-[120px]  flex    justify-center cursor-pointer px-3 rounded-md ",children:[" ",(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(o.vpL,{})," Previous"]})]}):(0,n.jsxs)("button",{disabled:!0,onClick:()=>{Q()},className:"bg-blue-400   w-[120px]  flex    justify-center cursor-pointer px-3 rounded-md ",children:[" ",(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(o.vpL,{})," Previous"]})]}),(0,n.jsx)("div",{className:"text-black border-black border-[1px] px-2 rounded-md",children:R}),R!==Math.ceil(P/10)&&0!==P?(0,n.jsxs)("button",{onClick:()=>{z()},className:"bg-blue-600 hover:bg-blue-700 w-[120px]  flex    justify-center cursor-pointer px-3 rounded-md ",children:[" ",(0,n.jsxs)("div",{className:"flex items-center gap-2",children:["Next",(0,n.jsx)(o.QyA,{})]})," "]}):(0,n.jsxs)("button",{disabled:!0,onClick:()=>{z()},className:"bg-blue-400   w-[120px]  flex    justify-center cursor-pointer px-3 rounded-md ",children:[" ",(0,n.jsxs)("div",{className:"flex items-center gap-2",children:["Next",(0,n.jsx)(o.QyA,{})]})," "]})]}),(0,n.jsx)("div",{className:"w-[100%] pb-5 flex gap-10  justify-center ",children:(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("button",{onClick:()=>{if(se.current){const e=le-50;ae(e),se.current.scrollTo({left:e,behavior:"smooth"})}},className:"bg-blue-600 hover:bg-blue-700 text-white px-3 mb-2 py-1 rounded-md mr-2",disabled:le<=0,children:"<"}),(0,n.jsx)("div",{ref:se,className:"relative overflow-x-auto hide-scrollbar",style:{maxWidth:"150px",whiteSpace:"nowrap"},children:(0,n.jsx)("div",{className:"flex gap-2",children:null===(r=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const s=[];for(let l=e;l<t;l+=r)s.push(l);return s}(1,re+1))||void 0===r?void 0:r.map((e=>(0,n.jsx)("div",{onClick:()=>{(e=>{E&&$((t=>{const r=e;return M(r),r}))})(e)},className:"border-black text-center cursor-pointer border-[1px] px-2",style:{width:50},children:e},e)))})}),(0,n.jsx)("button",{onClick:()=>{if(se.current){const e=le+50;ae(e),se.current.scrollTo({left:e,behavior:"smooth"})}},className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 mb-2 rounded-md ml-2",disabled:le>=(null===(c=se.current)||void 0===c?void 0:c.scrollWidth)-(null===(x=se.current)||void 0===x?void 0:x.clientWidth),children:">"})]})})]})]})})}}}]);
//# sourceMappingURL=789.54ad55e6.chunk.js.map