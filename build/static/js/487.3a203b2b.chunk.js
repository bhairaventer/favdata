"use strict";(self.webpackChunkfooter=self.webpackChunkfooter||[]).push([[487,593,194,318,846],{3986:(e,t,r)=>{r.d(t,{A:()=>i});var s=r(5043),a=r(5369),l=r(579);const i=e=>{let{show:t,onClose:r,message:i}=e;if(s.useEffect((()=>{if(t){const e=setTimeout((()=>{r()}),500);return()=>clearTimeout(e)}}),[t,r]),!t)return null;return(0,l.jsxs)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-60 z-50",children:[(0,l.jsx)("style",{children:"\n        @keyframes progress-bar {\n            0% { width: 0%; }\n            100% { width: 100%; }\n        }\n    "}),(0,l.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl relative transform transition-transform duration-300 ease-out scale-95",children:[i,(0,l.jsx)("button",{onClick:r,className:"absolute top-2 right-2 text-red-500 hover:text-red-700 transition-colors duration-200 ease-in-out","aria-label":"Close",children:(0,l.jsx)(a.QCr,{size:18})})]})]})}},1318:(e,t,r)=>{r.r(t),r.d(t,{default:()=>n});var s=r(6213),a=r(5043),l=r(3986),i=r(579);function n(e){const[t,r]=(0,a.useState)({}),[n,d]=(0,a.useState)({billdate:"",billno:""});let o="https://bwithf.onrender.com";const[c,u]=(0,a.useState)(""),m=e=>{d({...n,[e.target.name]:[e.target.value]})},[x,p]=(0,a.useState)(!1),h=()=>{p(!0)},[b,g]=(0,a.useState)(0),[v,f]=(0,a.useState)({}),j=(e,t)=>{const r=[...O],s=v[t];if(!r[_].serialNumbers.includes(s)){r[_].serialNumbers.length<=r[_].quantity&&(r[_].serialNumbers.push(s),z(r),f({...v,[t]:""}));const e=r[t].serialNumbers.length;g(e),r[t].quantity==e?G(!1):G(!0)}},[N,y]=(0,a.useState)([]),[w,S]=(0,a.useState)([]),[k,C]=(0,a.useState)(""),[q,P]=(0,a.useState)(""),[A,E]=(0,a.useState)([]),[M,I]=(0,a.useState)([]),[T,R]=(0,a.useState)([]),[_,$]=(0,a.useState)([]),[L,G]=(0,a.useState)(!1),[D,F]=(0,a.useState)("");(0,a.useEffect)((()=>{(async()=>{try{let e=localStorage.getItem("token");const t=await s.A.get(`${o}/api/product/productnames`,{method:"GET",headers:{authtoken:e}});y(t.data)}catch(e){console.error("Error fetching products:",e)}})(),(async()=>{try{let e=localStorage.getItem("token");const t=await s.A.get(`${o}/api/supplier/suppliernames`,{method:"GET",headers:{authtoken:e}});S(t.data)}catch(e){console.error("Error fetching products:",e)}})()}),[]),(0,a.useEffect)((()=>{E(k?N.productNames.filter((e=>e.toLowerCase().includes(k.toLowerCase()))):[])}),[k,N]),(0,a.useEffect)((()=>{I(q?w.supplierNames.filter((e=>e.toLowerCase().includes(q.toLowerCase()))):[])}),[q,w]);const[O,z]=(0,a.useState)([{quantity:"",amount:"",productname:"",serialNumbers:[],serialInput:"",rateper:""}]),W=async(e,t)=>{const r=[...O],{name:s,value:a}=null===t||void 0===t?void 0:t.target;let l={...r[e]};if("rateper"===s){const t=l.quantity*a;r[e].amount=t}if("amount"===s){const t=a/l.quantity;r[e].rateper=t,"NO"!==D&&(r[e].quantity==b?G(!1):G(!0))}else G(!1);if(0!==l.quantity&&"quantity"!==s?"NO"!==D&&(r[e].quantity==b?G(!1):G(!0)):G(!1),"serialInput"===s)r[e][s]=a;else if("supplier"===s){if(r[e][s]=a,!w.supplierNames.some((e=>e.toLowerCase().includes(a.toLowerCase()))))return;r[e][t.target.name]=t.target.value,I(a?w.supplierNames.filter((e=>e.toLowerCase().includes(a.toLowerCase()))):[])}else if("productname"===s){if(r[e][s]=a,!N.productNames.some((e=>e.toLowerCase().includes(a.toLowerCase()))))return;r[e][t.target.name]=t.target.value,E(a?N.productNames.filter((e=>e.toLowerCase().includes(a.toLowerCase()))):[])}else r[e][s]=a;z(r)};return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:" ",children:[(0,i.jsx)("div",{className:"App",children:(0,i.jsx)(l.A,{show:x,onClose:()=>{p(!1)},message:c})}),(0,i.jsxs)("div",{className:"flex gap-3 mt-2",children:[(0,i.jsxs)("div",{className:"w-[50%]",children:[(0,i.jsx)("input",{type:"text",onChange:e=>{const t=e.target.value;P(t),w.supplierNames.some((e=>e.toLowerCase().includes(t.toLowerCase())))?P(t):P(q)},value:q,name:"supplier",placeholder:"supplier name",className:" px-3 py-1 border-black border-[2px] w-[100%] rounded-md  "}),t.supplierquery&&(0,i.jsx)("span",{className:"text-red-500",children:t.supplierquery}),M&&(0,i.jsx)("div",{className:"absolute bg-gray-300 px-3 z-20  rounded-md",children:(0,i.jsx)("div",{className:"suggestions ",children:M.map(((e,t)=>(0,i.jsx)("div",{className:"suggestion  cursor-pointer",onClick:()=>(e=>{P(e),I([])})(e),children:e},t)))})})]}),(0,i.jsxs)("div",{className:"w-[25%] flex flex-col",children:[(0,i.jsx)("input",{type:"text",onChange:m,value:n.billno,name:"billno",placeholder:"billno",className:" px-3 py-1 border-black border-[2px]  rounded-md"}),t.billno&&(0,i.jsx)("span",{className:"text-red-500",children:t.billno})]}),(0,i.jsxs)("div",{className:"w-[25%] flex flex-col",children:[(0,i.jsx)("input",{type:"date",onChange:m,value:n.billdate,name:"billdate",placeholder:"bill date",className:" px-3 py-1 border-black border-[2px]   rounded-md"}),t.billdate&&(0,i.jsx)("span",{className:"text-red-500",children:t.billdate})]})]}),(0,i.jsxs)("div",{className:"form-inline flex relative mb-4 justify-between",children:[(0,i.jsx)("div",{className:"w-[25%] font-semibold",children:"Productname"}),(0,i.jsx)("div",{className:"w-[25%] font-semibold",children:"Quantity"}),(0,i.jsx)("div",{className:"w-[25%] font-semibold",children:"Rate per"}),(0,i.jsx)("div",{className:"w-[25%] font-semibold",children:"Amount"})]}),(0,i.jsxs)("div",{className:"mt-3 w-[100%]",children:[O.map(((e,r)=>{var a,l;return(0,i.jsxs)("div",{className:" ",children:[r===_&&e.quantity&&L&&(0,i.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-500 bg-opacity-50 backdrop-blur-md z-30",children:(0,i.jsxs)("div",{className:"bg-white border-gray-500 p-4 border-[1px] rounded-md shadow-lg z-40 relative",children:[(0,i.jsx)("input",{type:"text",onChange:e=>{((e,t)=>{const{name:r,value:s}=e.target;f({...v,[t]:s})})(e,r)},onKeyPress:e=>{((e,t)=>{"Enter"===e.key&&(e.preventDefault(),j(0,t))})(e,r)},value:v[r]||"",name:"serialNumbers",placeholder:"Enter serial number...",className:" px-3 py-1 border-black border-[2px] rounded-md"}),(0,i.jsx)("button",{type:"button",onClick:e=>j(0,r),children:"Add Serial"}),(null===e||void 0===e||null===(a=e.serialNumbers)||void 0===a?void 0:a.length)>0&&(0,i.jsxs)("div",{className:"mt-4",children:[(0,i.jsx)("h2",{className:"font-bold",children:"Serial Numbers:"}),(0,i.jsx)("ul",{className:"grid gap-2 w-[50%] mt-2",children:null===e||void 0===e||null===(l=e.serialNumbers)||void 0===l?void 0:l.map(((e,t)=>(0,i.jsxs)("li",{className:"flex gap-2 border-gray-400 border-[1px] rounded-md px-2 items-center justify-between",children:[e,(0,i.jsx)("button",{onClick:()=>(e=>{const t=[...O],r=t[_].serialNumbers;t[_].serialNumbers=r.filter((t=>t!==e)),z(t)})(e),className:"text-red-500",children:"x"})]},t)))})]})]})}),(0,i.jsxs)("div",{className:"form-inline flex relative  justify-between",onFocus:()=>$(r),children:[(0,i.jsxs)("div",{className:"inline-block w-[25%]",children:[(0,i.jsx)("input",{type:"text",className:"w-[100%]",onFocus:()=>R(r),name:"productname",value:e.productname||"",onChange:e=>W(r,e),placeholder:"Product"}),t[`productname_${r}`]&&(0,i.jsx)("span",{className:"text-red-500",children:t[`productname_${r}`]}),T===r&&A&&(0,i.jsx)("div",{className:"absolute bg-gray-300 px-3  rounded-md",children:(0,i.jsx)("div",{className:"suggestions",children:A.map(((e,t)=>(0,i.jsx)("div",{className:"suggestion cursor-pointer",onClick:()=>(async(e,t)=>{try{var r,a,l,i,n,d;let c=localStorage.getItem("token");const u=await s.A.get(`${o}/api/product/fetchsingleproduct/${e}`,{method:"GET",headers:{authtoken:c}});F(null===u||void 0===u||null===(r=u.data)||void 0===r||null===(a=r.othername1)||void 0===a?void 0:a.Serialrequired);const m=[...O];m[t].productname=null===u||void 0===u||null===(l=u.data)||void 0===l||null===(i=l.othername1)||void 0===i?void 0:i.name,m[t].productid=null===u||void 0===u||null===(n=u.data)||void 0===n||null===(d=n.othername1)||void 0===d?void 0:d._id,z(m),E([])}catch(c){console.error("Error fetching products:",c)}})(e,r),children:e},t)))})})]}),(0,i.jsxs)("div",{className:"w-[25%] flex flex-col",children:[(0,i.jsx)("input",{type:"number",name:"quantity",onChange:e=>W(r,e),value:e.quantity,className:"px-3 py-1    rounded-md"}),t[`quantity_${r}`]&&(0,i.jsx)("span",{className:"text-red-500",children:t[`quantity_${r}`]})]}),(0,i.jsxs)("div",{className:"w-[25%]  flex flex-col",children:[(0,i.jsx)("input",{type:"number",name:"rateper",onChange:e=>W(r,e),value:e.rateper,className:"px-3 py-1   w- rounded-md"}),t[`rateper_${r}`]&&(0,i.jsx)("span",{className:"text-red-500",children:t[`rateper_${r}`]})]}),(0,i.jsxs)("div",{className:"w-[25%]  flex flex-col",children:[(0,i.jsx)("input",{type:"number",name:"amount",onChange:e=>W(r,e),value:e.amount,className:"px-3 py-1   rounded-md"}),t[`amount_${r}`]&&(0,i.jsx)("span",{className:"text-red-500",children:t[`amount_${r}`]})]}),r?(0,i.jsx)("button",{className:"absolute bg-white border-[1px] border-gray-400 rounded-md text-[12px] text-red-500 right-0",type:"button",onClick:()=>(e=>{const t=[...O];t.splice(e,1),z(t)})(r),children:"Remove"}):null]},r)]})})),(0,i.jsx)("button",{type:"button",onClick:()=>{z([...O,{quantity:"",amount:"",productname:"",serialNumbers:[],serialInput:"",rateper:""}])},children:"Add More"})]}),(0,i.jsx)("div",{className:"flex justify-center",children:(0,i.jsx)("div",{className:"bg-blue-600 text-white py-1 px-3 rounded-md cursor-pointer",onClick:()=>{(async()=>{const e={};if(q||(e.supplierquery="Supplier is required"),n.billdate||(e.billdate="Bill date is required"),n.billno||(e.billno="Bill number is required"),O.forEach(((t,r)=>{t.productname||(e[`productname_${r}`]="Product name is required"),(!t.quantity||isNaN(t.quantity)||t.quantity<=0)&&(e[`quantity_${r}`]="Valid quantity is required"),(!t.rateper||isNaN(t.rateper)||t.rateper<=0)&&(e[`rateper_${r}`]="Valid rate per is required"),(!t.amount||isNaN(t.amount)||t.amount<=0)&&(e[`amount_${r}`]="Valid amount is required")})),Object.keys(e).length)r(e);else try{const{billdate:e,billno:t}=n,r=e.toString(),a=t.toString(),l=localStorage.getItem("token"),c=await s.A.post(`${o}/api/purchase/addpurchase`,{productname:O,billdate:r,billno:a,supplier:q},{headers:{authtoken:l}});c.data.success?(u((0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("p",{className:"text-green-600 font-semibold text-lg mb-2",children:c.data.message}),(0,i.jsx)("div",{className:"relative w-full h-2 rounded-full overflow-hidden bg-green-200 mt-4",children:(0,i.jsx)("div",{className:"absolute top-0 left-0 h-full bg-green-500 animate-progress-bar2",style:{animationDuration:"0.5s"}})})]})),h(),z([{quantity:"",amount:"",productname:"",serialNumbers:[],serialInput:"",rateper:""}]),d({billdate:"",billno:""}),P("")):(u((0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("p",{className:"text-red-600 font-semibold text-lg mb-2",children:c.data.message}),(0,i.jsx)("div",{className:"relative w-full h-2 rounded-full overflow-hidden bg-red-200 mt-4",children:(0,i.jsx)("div",{className:"absolute top-0 left-0 h-full bg-red-500 animate-progress-bar2",style:{animationDuration:"0.5s"}})})]})),h())}catch(t){console.error("Error:",t),u((0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("p",{className:"text-red-600 font-semibold text-lg mb-2",children:"An error occurred. Please try again."}),(0,i.jsx)("div",{className:"relative w-full h-2 rounded-full overflow-hidden bg-red-200 mt-4",children:(0,i.jsx)("div",{className:"absolute top-0 left-0 h-full bg-red-500 animate-progress-bar2",style:{animationDuration:"0.5s"}})})]}))}})()},children:"Add Purchase"})})]})})}},2194:(e,t,r)=>{r.r(t),r.d(t,{default:()=>o});var s=r(6213),a=r(5043),l=r(5475),i=r(2684),n=r(5369),d=r(579);function o(e){var t,r,o;const{fetchSinglePurchase:c}=(0,a.useContext)(i.A),[u,m]=(0,a.useState)([]),[x,p]=(0,a.useState)(!0),[h,b]=(0,a.useState)(null),[g,v]=(0,a.useState)(1),[f,j]=(0,a.useState)(""),[N,y]=(0,a.useState)(!0);(0,a.useEffect)((()=>{k(g)}),[]);const w=()=>{g>1&&v((e=>{const t=e-1;return k(t),t}))},S=()=>{Math.ceil(f/20),N&&v((e=>{const t=e+1;return k(t),t}))},k=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=localStorage.getItem("token");try{const a=await s.A.get(`https://bwithf.onrender.com/api/purchase/fetchpurchase/${e}`,{method:"GET",headers:{authtoken:r},params:{search:t}});j(a.data.totalCount),0===a.data.purchase.length?(y(!1),m(a.data)):(m(a.data),y(!0)),p(!1)}catch(h){b(h),p(!1)}},[C,q]=(0,a.useState)(""),P=Math.ceil(f/20),A=(0,a.useRef)(null),[E,M]=(0,a.useState)(0);return x?(0,d.jsx)("p",{children:"Loading..."}):h?(0,d.jsxs)("p",{children:["Error: ",h.message]}):(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)("div",{className:" ",children:[(0,d.jsxs)("div",{className:"relative mt-4",children:[(0,d.jsx)("input",{type:"text",placeholder:"Search Purchase...",value:C,onChange:e=>{q(e.target.value),k(1,e.target.value)},className:"w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-200 ease-in-out"}),(0,d.jsx)("svg",{className:"absolute top-1/2 right-3 transform -translate-y-1/2 w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 4a7 7 0 011.2 13.794m1.2-1.794a7 7 0 01-1.2-13.794m1.2 13.794a7 7 0 100-14 7 7 0 000 14z"})})]}),(0,d.jsxs)("div",{className:"  mt-4 lg:w-full w-[1000px] h-[500px] overflow-y-scroll",children:[(0,d.jsxs)("div",{className:"bg-[#464646] flex   text-white mb-2  px-2 items-center justify-between",children:[(0,d.jsx)("div",{className:" border-white  px-3 py-1  w-[160px] ",children:"Bill Date"}),(0,d.jsx)("div",{className:" border-l-[1px]  border-white w-[120px]  px-3 py-1 ",children:"Bill No"}),(0,d.jsx)("div",{className:" border-white border-l-[1px] px-3 py-1  w-[160px] ",children:"supplier"}),(0,d.jsx)("div",{className:"border-l-[1px] border-white w-[130px]  px-3 py-1 ",children:"Amount"})]}),null===u||void 0===u||null===(t=u.purchase)||void 0===t?void 0:t.map((e=>{let t=0;null===e||void 0===e||e.name.forEach((e=>{t+=parseInt(e.amount)}));let r=new Date(null===e||void 0===e?void 0:e.billdate).toLocaleDateString("en-IN",{year:"numeric",month:"2-digit",day:"2-digit"});return r=r.split("/").join("-"),(0,d.jsx)(l.N_,{onClick:()=>{c(e._id)},to:"../SinglePurchase",className:"rounded-full   child cursor-pointer",children:(0,d.jsxs)("div",{className:"bg-[#f2f2f2] flex mt-1  text-black cursor-pointer px-2 justify-between items-center ",children:[(0,d.jsx)("div",{className:"  px-3 py-1  w-[160px] ",children:r}),(0,d.jsx)("div",{className:" w-[120px]  px-3 py-1 ",children:null===e||void 0===e?void 0:e.billno}),(0,d.jsxs)("div",{className:"  px-3 py-1  w-[160px] ",children:[null===e||void 0===e?void 0:e.Supplier," "]}),(0,d.jsx)("div",{className:" w-[130px]  px-3 py-1 ",children:t})]})},e._id)}))]}),(0,d.jsxs)("div",{className:"    absolute md:w-[80%]  lg:w-[85%]   w-[90%] mt-10    ",children:[(0,d.jsxs)("div",{className:"text-white w-[100%] pb-5 flex gap-10 justify-center ",children:[1!==g?(0,d.jsxs)("button",{onClick:()=>{w()},className:"bg-blue-600 hover:bg-blue-700 w-[120px]  flex    justify-center cursor-pointer px-3 rounded-md ",children:[" ",(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(n.vpL,{})," Previous"]})]}):(0,d.jsxs)("button",{disabled:!0,onClick:()=>{w()},className:"bg-blue-400   w-[120px]  flex    justify-center cursor-pointer px-3 rounded-md ",children:[" ",(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(n.vpL,{})," Previous"]})]}),(0,d.jsx)("div",{className:"text-black border-black border-[1px] px-2 rounded-md",children:g}),g!==Math.ceil(f/20)&&0!==f?(0,d.jsxs)("button",{onClick:()=>{S()},className:"bg-blue-600 hover:bg-blue-700 w-[120px]  flex    justify-center cursor-pointer px-3 rounded-md ",children:[" ",(0,d.jsxs)("div",{className:"flex items-center gap-2",children:["Next",(0,d.jsx)(n.QyA,{})]})," "]}):(0,d.jsxs)("button",{disabled:!0,onClick:()=>{S()},className:"bg-blue-400   w-[120px]  flex    justify-center cursor-pointer px-3 rounded-md ",children:[" ",(0,d.jsxs)("div",{className:"flex items-center gap-2",children:["Next",(0,d.jsx)(n.QyA,{})]})," "]})]}),(0,d.jsx)("div",{className:"w-[100%] pb-5 flex gap-10  justify-center ",children:(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)("button",{onClick:()=>{if(A.current){const e=E-50;M(e),A.current.scrollTo({left:e,behavior:"smooth"})}},className:"bg-blue-600 hover:bg-blue-700 text-white px-3 mb-2 py-1 rounded-md mr-2",disabled:E<=0,children:"<"}),(0,d.jsx)("div",{ref:A,className:"relative overflow-x-auto hide-scrollbar",style:{maxWidth:"150px",whiteSpace:"nowrap"},children:(0,d.jsx)("div",{className:"flex gap-2",children:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const s=[];for(let a=e;a<t;a+=r)s.push(a);return s}(1,P+1).map((e=>(0,d.jsx)("div",{onClick:()=>{(e=>{N&&v((t=>{const r=e;return k(r),r}))})(e)},className:"border-black text-center cursor-pointer border-[1px] px-2",style:{width:50},children:e},e)))})}),(0,d.jsx)("button",{onClick:()=>{if(A.current){const e=E+50;M(e),A.current.scrollTo({left:e,behavior:"smooth"})}},className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 mb-2 rounded-md ml-2",disabled:E>=(null===(r=A.current)||void 0===r?void 0:r.scrollWidth)-(null===(o=A.current)||void 0===o?void 0:o.clientWidth),children:">"})]})})]})]})})}},6846:(e,t,r)=>{r.r(t),r.d(t,{default:()=>n});var s=r(5043),a=r(6213),l=r(3986),i=r(579);function n(){const[e,t]=(0,s.useState)({name:"",othername:"",category:"",MRP:"",salingprice:"",Cost:"",Serialrequired:""}),[r,n]=(0,s.useState)(""),[d,o]=(0,s.useState)(""),[c,u]=(0,s.useState)([]),[m,x]=(0,s.useState)({}),[p,h]=(0,s.useState)([]),[b,g]=(0,s.useState)([]),[v,f]=(0,s.useState)(""),[j,N]=(0,s.useState)(""),[y,w]=(0,s.useState)(!1),S="https://bwithf.onrender.com",k=(0,s.useRef)(null),C=(0,s.useRef)(null),q=(0,s.useRef)(null),P=(0,s.useRef)(null),A=(0,s.useRef)(null),E=(0,s.useRef)(null),M=(e,t)=>{"Enter"===e.key&&(e.preventDefault(),t.current.focus())},I=r=>{t({...e,[r.target.name]:r.target.value})},T=localStorage.getItem("token");(0,s.useEffect)((()=>{(async()=>{try{const e=await a.A.get(`${S}/api/category/fetchallcategory`,{headers:{authtoken:T}});h(e.data)}catch(e){console.error("Error fetching categories:",e)}})()}),[]),(0,s.useEffect)((()=>{g(p.filter((e=>e.name.toLowerCase().includes(v.toLowerCase()))))}),[v,p]);const[R,_]=(0,s.useState)(!1),$=()=>{_(!0)};return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:"",children:[(0,i.jsx)("div",{className:"App",children:(0,i.jsx)(l.A,{show:R,onClose:()=>{_(!1)},message:r})}),(0,i.jsxs)("div",{className:"mt-4 lg:w-full",children:[(0,i.jsx)("div",{className:"text-[12px] ml-2 text-red-600"}),(0,i.jsxs)("div",{className:"bg-[#f2f2f2] grid md:grid-cols-2 text-black px-2 gap-6 md:gap-6 items-start",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("input",{type:"text",name:"name",onChange:I,value:e.name,placeholder:"Product Name",ref:k,onKeyPress:e=>M(e,C),className:"px-3 py-1 border-black w-[100%] border-[2px] rounded-md "+(m.name?"border-red-500":"")}),m.name&&(0,i.jsx)("p",{className:"text-red-500 text-xs",children:m.name})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("input",{type:"text",name:"MRP",onChange:I,value:e.MRP,placeholder:"MRP",ref:q,onKeyPress:e=>M(e,P),className:"px-3 py-1 border-black w-[100%] border-[2px] rounded-md "+(m.MRP?"border-red-500":"")}),m.MRP&&(0,i.jsx)("p",{className:"text-red-500 text-xs",children:m.MRP})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("input",{type:"text",name:"salingprice",onChange:I,value:e.salingprice,placeholder:"Selling Price",ref:P,onKeyPress:e=>M(e,A),className:"px-3 py-1 border-black w-[100%] border-[2px] rounded-md "+(m.salingprice?"border-red-500":"")}),m.salingprice&&(0,i.jsx)("p",{className:"text-red-500 text-xs",children:m.salingprice})]}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)("button",{type:"button",onClick:()=>w(!y),className:"  px-3 py-1 border-black border-[2px] rounded-md w-[100%] "+(m.category?"border-red-500":""),children:e.category?`Selected: ${j}`:"Select Category"}),y&&(0,i.jsxs)("div",{className:"absolute z-10 bg-white border border-gray-300 rounded-md shadow-lg w-full mt-2",children:[(0,i.jsx)("input",{type:"text",placeholder:"Search categories...",value:v,onChange:e=>f(e.target.value),className:"w-full px-3 py-2 border-b border-gray-300 rounded-t-md"}),(0,i.jsx)("div",{className:"max-h-60 overflow-y-auto",children:b.map((r=>(0,i.jsx)("button",{onClick:()=>(r=>{N(r.name),t({...e,category:r._id}),w(!1)})(r),className:"w-full px-3 py-2 text-left hover:bg-gray-200",children:r.name},r._id)))})]}),m.category&&(0,i.jsx)("p",{className:"text-red-500 text-xs",children:m.category})]}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)("input",{type:"text",onChange:e=>{o(e.target.value)},onKeyPress:e=>M(e,E),value:d,name:"serialNumbers",placeholder:"Enter othername",ref:A,className:"px-3 py-1 w-[100%] border-black border-[2px] rounded-md "+(m.serialNumbers?"border-red-500":"")}),(0,i.jsx)("button",{type:"button",className:"w-[100px]",onClick:()=>{d.trim()&&!c.includes(d.trim())&&(u([...c,d.trim()]),o(""))},children:"Add Name"}),m.serialNumbers&&(0,i.jsx)("p",{className:"text-red-500 text-xs",children:m.serialNumbers}),c.length>0&&(0,i.jsxs)("div",{className:"mt-4",children:[(0,i.jsx)("h2",{className:"font-bold",children:"Other name"}),(0,i.jsx)("ul",{className:"grid gap-2 w-[50%] mt-2",children:c.map(((e,t)=>(0,i.jsxs)("li",{className:"flex justify-between bg-gray-200 p-2 rounded-md",children:[(0,i.jsx)("span",{children:e}),(0,i.jsx)("button",{onClick:()=>{return t=e,void u(c.filter((e=>e!==t)));var t},className:"text-red-500 hover:text-red-700",children:"Remove"})]},t)))})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("select",{name:"Serialrequired",onChange:r=>{t({...e,Serialrequired:r.target.value})},value:e.Serialrequired,ref:E,className:"px-3 py-1 border-black w-[100%] border-[2px] rounded-md "+(m.Serialrequired?"border-red-500":""),children:[(0,i.jsx)("option",{value:"",children:"Serial Required"}),[{value:"YES",label:"YES"},{value:"NO",label:"NO"}].map((e=>(0,i.jsx)("option",{value:e.value,children:e.label},e.value)))]}),m.Serialrequired&&(0,i.jsx)("p",{className:"text-red-500 text-xs",children:m.Serialrequired})]})]})]}),(0,i.jsx)("div",{className:"w-[100%] flex justify-center",children:(0,i.jsx)("button",{type:"button",onClick:async()=>{if((()=>{const t={},{name:r,category:s,MRP:a,salingprice:l,Serialrequired:i}=e;return r.trim()||(t.name="Product name is required"),s.trim()||(t.category="Category is required"),a.trim()&&!isNaN(a)||(t.MRP="Valid MRP is required"),l.trim()&&!isNaN(l)||(t.salingprice="Valid selling price is required"),i||(t.Serialrequired="Serial requirement status is required"),x(t),0===Object.keys(t).length})())try{const{name:r,category:s,MRP:l,salingprice:d,Serialrequired:o}=e;let u=r.toString(),m=s.toString(),x=l.toString(),p=d.toString(),h=o.toString(),b=localStorage.getItem("token"),g=await a.A.post(`${S}/api/product/addproduct`,{name:u,category:m,MRP:x,salingprice:p,othername:c,Serialrequired:h},{headers:{authtoken:b}});g.data.success?(n((0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("p",{className:"text-green-600 font-semibold text-lg mb-2",children:g.data.message}),(0,i.jsx)("div",{className:"relative w-full h-2 rounded-full overflow-hidden bg-green-200 mt-4",children:(0,i.jsx)("div",{className:"absolute top-0 left-0 h-full bg-green-500 animate-progress-bar2",style:{animationDuration:"0.5s"}})})]})),$()):(n((0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("p",{className:"text-red-600 font-semibold text-lg mb-2",children:g.data.message}),(0,i.jsx)("div",{className:"relative w-full h-2 rounded-full overflow-hidden bg-red-200 mt-4",children:(0,i.jsx)("div",{className:"absolute top-0 left-0 h-full bg-red-500 animate-progress-bar2",style:{animationDuration:"0.5s"}})})]})),$()),t({name:"",othername:"",category:"",MRP:"",salingprice:"",Serialrequired:""})}catch(r){console.error("Error:",r)}},className:"mt-4 px-4 py-2 bg-blue-500 w-[50%] text-white rounded-md",children:"Add Product"})})]})})}},2593:(e,t,r)=>{r.r(t),r.d(t,{default:()=>c});var s=r(6213),a=r(5043),l=r(7149),i=r(5369),n=r(5475),d=r(2684),o=r(579);function c(e){var t,r,c;const[u,m]=(0,a.useState)([]),[x,p]=(0,a.useState)(!0),[h,b]=(0,a.useState)(null),[g,v]=(0,a.useState)(!1),[f,j]=(0,a.useState)(1),[N,y]=(0,a.useState)(""),[w,S]=(0,a.useState)([]),[k,C]=(0,a.useState)([]),[q,P]=(0,a.useState)(""),[A,E]=(0,a.useState)(""),[M,I]=(0,a.useState)({}),[T,R]=(0,a.useState)(""),[_,$]=(0,a.useState)(""),[L,G]=(0,a.useState)(!1),[D,F]=(0,a.useState)(!0),O="https://bwithf.onrender.com",{summary:z,setsummary:W}=(0,a.useContext)(d.A),{userrole:Q}=(0,a.useContext)(d.A),[B,K]=(0,a.useState)(""),[V,Y]=(0,a.useState)({id:"",name:"",category:"",MRP:"",salingprice:"",Serialrequired:""}),[U,H]=(0,a.useState)(""),[J,X]=(0,a.useState)([]);(0,a.useEffect)((()=>{te(f)}),[]);const Z=()=>{f>1&&j((e=>{const t=e-1;return te(t),t}))},ee=()=>{Math.ceil(N/20),D&&j((e=>{const t=e+1;return te(t),t}))},te=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_;console.log(t);let r=localStorage.getItem("token");try{const a=await s.A.get(`${O}/api/product/fetchproductforadmin/${e}`,{headers:{authtoken:r},params:{search:t}});y(a.data.totalCount),0===a.data.products.length?(F(!1),m(a.data)):(m(a.data),F(!0)),p(!1)}catch(h){b(h),p(!1)}};console.log(V);const re=e=>{Y({...V,[e.target.name]:e.target.value})};let se=e=>{v(!1),window.confirm("Do you really want to delete?")&&(e=>{let t=localStorage.getItem("token");s.A.delete(`${O}/api/product/deleteproduct/${e}`,{method:"DELETE",headers:{authtoken:t}}),te(f)})(e)};const ae=()=>{!U.trim()||null!==J&&void 0!==J&&J.includes(U.trim())||(X([...J,U.trim()]),Y({...V,othername:[...J,U.trim()]}),H(""))},le=Math.ceil(N/20),ie=(0,a.useRef)(null),[ne,de]=(0,a.useState)(0),oe=localStorage.getItem("token");(0,a.useEffect)((()=>{(async()=>{try{const e=await s.A.get(`${O}/api/category/fetchallcategory`,{headers:{authtoken:oe}});S(e.data)}catch(h){console.error("Error fetching categories:",h)}})()}),[]),(0,a.useEffect)((()=>{C(w.filter((e=>e.name.toLowerCase().includes(q.toLowerCase()))))}),[q,w]);return x?(0,o.jsx)("p",{children:"Loading..."}):h?(0,o.jsxs)("p",{children:["Error: ",h.message]}):(0,o.jsxs)(o.Fragment,{children:[g&&(0,o.jsx)("div",{className:"flex absolute items-center md:w-[80%]  lg:w-[85%]   w-[90%] justify-center  z-30",children:(0,o.jsxs)("div",{className:"bg-white p-6 rounded-lg border-gray-300 border w-[90%] md:w-[80%] lg:w-[70%] shadow-xl",children:[(0,o.jsx)("div",{onClick:()=>v(!1),className:"rounded-full cursor-pointer w-6 h-6  -block text-center border-black border-2 flex items-center justify-center bg-red-500 text-white",children:"x"}),(0,o.jsxs)("div",{className:"grid md:grid-cols-2 grid-cols-1 gap-4 mt-4",children:[(0,o.jsxs)("div",{className:"flex flex-col",children:[(0,o.jsx)("label",{htmlFor:"name",className:"mb-1 text-sm font-semibold text-gray-700",children:"Name"}),(0,o.jsx)("input",{type:"text",id:"name",name:"name",value:V.name,onChange:re,placeholder:"Name",className:"px-3 py-2 border border-gray-300 rounded-md w-full",required:!0})]}),(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("button",{type:"button",onClick:()=>G(!L),className:"  px-3 py-1 border-black border-[2px] rounded-md w-[100%] "+(M.category?"border-red-500":""),children:V.category?`Selected: ${T}`:"Select Category"}),L&&(0,o.jsxs)("div",{className:"absolute z-10 bg-white border border-gray-300 rounded-md shadow-lg w-full mt-2",children:[(0,o.jsx)("input",{type:"text",placeholder:"Search categories...",value:q,onChange:e=>P(e.target.value),className:"w-full px-3 py-2 border-b border-gray-300 rounded-t-md"}),(0,o.jsx)("div",{className:"max-h-60 overflow-y-auto",children:k.map((e=>(0,o.jsx)("button",{onClick:()=>(e=>{R(e.name),Y({...V,category:e._id}),G(!1)})(e),className:"w-full px-3 py-2 text-left hover:bg-gray-200",children:e.name},e._id)))})]}),M.category&&(0,o.jsx)("p",{className:"text-red-500 text-xs",children:M.category})]}),(0,o.jsxs)("div",{className:"flex flex-col",children:[(0,o.jsx)("label",{htmlFor:"MRP",className:"mb-1 text-sm font-semibold text-gray-700",children:"MRP"}),(0,o.jsx)("input",{type:"text",id:"MRP",name:"MRP",value:V.MRP,onChange:re,placeholder:"MRP",className:"px-3 py-2 border border-gray-300 rounded-md w-full",required:!0})]}),(0,o.jsxs)("div",{className:"flex flex-col",children:[(0,o.jsx)("label",{htmlFor:"salingprice",className:"mb-1 text-sm font-semibold text-gray-700",children:"Selling Price"}),(0,o.jsx)("input",{type:"text",id:"salingprice",name:"salingprice",value:V.salingprice,onChange:re,placeholder:"Selling Price",className:"px-3 py-2 border border-gray-300 rounded-md w-full",required:!0})]}),(0,o.jsxs)("div",{className:"md:col-span-2 flex flex-col",children:[(0,o.jsx)("label",{htmlFor:"Serialrequired",className:"mb-1 text-sm font-semibold text-gray-700",children:"Serial Required"}),(0,o.jsxs)("select",{id:"Serialrequired",name:"Serialrequired",onChange:re,value:V.Serialrequired,className:"px-3 py-2 border border-gray-300 rounded-md w-full",children:[(0,o.jsx)("option",{value:"Serialrequired",children:"Serial Required"}),[{value:"YES",label:"YES"},{value:"NO",label:"NO"}].map((e=>(0,o.jsx)("option",{value:e.value,children:e.label},e.value)))]})]}),(0,o.jsxs)("div",{className:"md:col-span-2 flex flex-col",children:[(0,o.jsx)("label",{htmlFor:"serialNumbers",className:"mb-1 text-sm font-semibold text-gray-700",children:"Add Serial Numbers"}),(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)("input",{type:"text",id:"serialNumbers",onChange:e=>(e=>{H(e.target.value)})(e),onKeyPress:e=>(e=>{"Enter"===e.key&&(e.preventDefault(),ae())})(e),value:U,name:"serialNumbers",placeholder:"Enter other name",className:"flex-grow px-3 py-2 border border-gray-300 rounded-md"}),(0,o.jsx)("button",{type:"button",onClick:e=>ae(),className:"px-3 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-all duration-200",children:"Add Name"})]}),(null===J||void 0===J?void 0:J.length)>0&&(0,o.jsxs)("div",{className:"mt-4",children:[(0,o.jsx)("h2",{className:"font-bold text-lg",children:"Other Names:"}),(0,o.jsx)("ul",{className:"mt-2 grid gap-2",children:J.map(((e,t)=>(0,o.jsxs)("li",{className:"flex items-center justify-between bg-gray-100 px-3 py-2 border border-gray-300 rounded-md",children:[e,(0,o.jsx)("button",{onClick:()=>{return t=e,X(J.filter((e=>e!==t))),void Y({...V,othername:J.filter((e=>e!==t))});var t},className:"text-red-500 font-bold",children:"x"})]},t)))})]})]})]}),(0,o.jsx)("button",{onClick:()=>(async()=>{try{let e=localStorage.getItem("token");await s.A.put(`${O}/api/product/updateproduct/${V.id}`,V,{method:"PUT",headers:{authtoken:e}}),te(f),v(!1)}catch(h){console.error(h),alert("Error updating order")}})(),className:"mt-6 w-full py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-all duration-200",children:"Update Order"})]})}),(0,o.jsxs)("div",{className:" ",children:[(0,o.jsx)("div",{children:(0,o.jsxs)("div",{className:"relative mt-2",children:[(0,o.jsx)("input",{type:"text",placeholder:"Search products...",value:_,onChange:e=>{$(e.target.value),console.log(e.target.value),te(1,e.target.value)},className:"w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-200 ease-in-out"}),(0,o.jsx)("svg",{className:"absolute top-1/2 right-3 transform -translate-y-1/2 w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 4a7 7 0 011.2 13.794m1.2-1.794a7 7 0 01-1.2-13.794m1.2 13.794a7 7 0 100-14 7 7 0 000 14z"})})]})}),(0,o.jsxs)("div",{className:"  mt-4 lg:w-full h-[550px] w-[1000px] ",children:[(0,o.jsxs)("div",{className:"bg-[#464646] flex   text-white mb-2  px-2 items-center justify-between",children:[(0,o.jsx)("div",{className:" border-white  px-3 py-1  w-[160px] ",children:"Product Name"}),(0,o.jsx)("div",{className:" border-white border-l-[1px] px-3 py-1  w-[160px] ",children:"Category"}),(0,o.jsx)("div",{className:" border-l-[1px]  border-white w-[80px]  px-3 py-1 ",children:"MRP"}),(0,o.jsx)("div",{className:"border-l-[1px] border-white w-[130px]  px-3 py-1 ",children:"Saling price"}),(0,o.jsx)("div",{className:"border-l-[1px] border-white w-[100px]  px-3 py-1 ",children:"NewOrder"}),(0,o.jsx)("div",{className:"border-l-[1px] border-white w-[70px]  px-3 py-1 ",children:"Available"}),(0,o.jsx)("div",{className:"border-l-[1px] border-white w-[130px]  px-3 py-1 ",children:"In stock"}),(0,o.jsx)("div",{className:"border-l-[1px] border-white w-[130px]  px-3 py-1 ",children:"damage"})]}),null===u||void 0===u||null===(t=u.products)||void 0===t?void 0:t.map((e=>{var t,r;let s=e.purchasestock,a=e.totalsale;return NaN!==s&&0!=s&&s||(s=0),NaN!==a&&0!=a&&a||(a=0),(0,o.jsxs)("div",{className:"bg-[#f2f2f2] flex mt-3   text-black  px-2 justify-between items-center ",children:[(0,o.jsx)(n.N_,{onClick:()=>{W(e)},to:"../Singleproduct",className:"  px-3 py-1  w-[170px] ",children:e.name}),(0,o.jsxs)(n.N_,{onClick:()=>{W(e)},to:"../Singleproduct",className:"  px-3 py-1  w-[170px] ",children:[null!==e&&void 0!==e&&null!==(t=e.category[0])&&void 0!==t&&t.name?null===e||void 0===e||null===(r=e.category[0])||void 0===r?void 0:r.name:e.category," "]}),(0,o.jsx)(n.N_,{onClick:()=>{W(e)},to:"../Singleproduct",className:" w-[80px]  px-3 py-1 ",children:null===e||void 0===e?void 0:e.MRP}),(0,o.jsx)(n.N_,{onClick:()=>{W(e)},to:"../Singleproduct",className:" w-[130px]  px-3 py-1 ",children:e.salingprice}),(0,o.jsx)(n.N_,{onClick:()=>{W(e)},to:"../Singleproduct",className:" w-[100px]  px-3 py-1 ",children:e.ordercome}),(0,o.jsx)(n.N_,{onClick:()=>{W(e)},to:"../Singleproduct",className:" w-[70px]  px-3 py-1 ",children:s-a-e.ordercome}),(0,o.jsx)(n.N_,{onClick:()=>{W(e)},to:"../Singleproduct",className:" w-[130px]  px-3 py-1 ",children:s-a}),(0,o.jsx)(n.N_,{onClick:()=>{W(e)},to:"../Singleproduct",className:"border-l-[1px] border-white w-[90px]  px-3 py-1 ",children:void 0==e.totalDamaged?0:e.totalDamaged}),(0,o.jsxs)("div",{className:" sticky right-0 flex   bg-black bottom-1 z-10",children:[Q.canEdit&&(0,o.jsx)("div",{onClick:()=>{(e=>{var t,r;Y({id:e._id,name:e.name,category:null===e||void 0===e||null===(t=e.category[0])||void 0===t?void 0:t._id,MRP:e.MRP,Serialrequired:e.Serialrequired,salingprice:e.salingprice}),R(null===e||void 0===e||null===(r=e.category[0])||void 0===r?void 0:r.name),null!==e&&void 0!==e&&e.othername?X(e.othername):X([]),v(!0)})(e)},className:"bg-black rounded-full w-6 h-6 flex justify-center items-center  absolute bottom-1 right-8 text-white     text-[16px]  ",children:(0,o.jsx)(l.Yvo,{})}),Q.canDelete&&(0,o.jsx)("div",{onClick:()=>{se(e._id)},className:"bg-red-400 rounded-full absolute bottom-1 right-0 w-6 h-6 flex justify-center items-center  text-white    text-[16px]  ",children:(0,o.jsx)(l.b6i,{})})]})]},e._id)}))]}),(0,o.jsxs)("div",{className:"    absolute md:w-[80%]  lg:w-[85%]   w-[90%] mt-10    ",children:[(0,o.jsxs)("div",{className:"text-white w-[100%] pb-5 flex gap-10 justify-center ",children:[1!==f?(0,o.jsxs)("button",{onClick:()=>{Z()},className:"bg-blue-600 hover:bg-blue-700 w-[120px]  flex    justify-center cursor-pointer px-3 rounded-md ",children:[" ",(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)(i.vpL,{})," Previous"]})]}):(0,o.jsxs)("button",{disabled:!0,onClick:()=>{Z()},className:"bg-blue-400   w-[120px]  flex    justify-center cursor-pointer px-3 rounded-md ",children:[" ",(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)(i.vpL,{})," Previous"]})]}),(0,o.jsx)("div",{className:"text-black border-black border-[1px] px-2 rounded-md",children:f}),f!==Math.ceil(N/20)&&0!==N?(0,o.jsxs)("button",{onClick:()=>{ee()},className:"bg-blue-600 hover:bg-blue-700 w-[120px]  flex    justify-center cursor-pointer px-3 rounded-md ",children:[" ",(0,o.jsxs)("div",{className:"flex items-center gap-2",children:["Next",(0,o.jsx)(i.QyA,{})]})," "]}):(0,o.jsxs)("button",{disabled:!0,onClick:()=>{ee()},className:"bg-blue-400   w-[120px]  flex    justify-center cursor-pointer px-3 rounded-md ",children:[" ",(0,o.jsxs)("div",{className:"flex items-center gap-2",children:["Next",(0,o.jsx)(i.QyA,{})]})," "]})]}),(0,o.jsx)("div",{className:"w-[100%] pb-5 flex gap-10  justify-center ",children:(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("button",{onClick:()=>{if(ie.current){const e=ne-50;de(e),ie.current.scrollTo({left:e,behavior:"smooth"})}},className:"bg-blue-600 hover:bg-blue-700 text-white px-3 mb-2 py-1 rounded-md mr-2",disabled:ne<=0,children:"<"}),(0,o.jsx)("div",{ref:ie,className:"relative overflow-x-auto hide-scrollbar",style:{maxWidth:"150px",whiteSpace:"nowrap"},children:(0,o.jsx)("div",{className:"flex gap-2",children:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const s=[];for(let a=e;a<t;a+=r)s.push(a);return s}(1,le+1).map((e=>(0,o.jsx)("div",{onClick:()=>{(e=>{D&&j((t=>{const r=e;return te(r),r}))})(e)},className:"border-black text-center cursor-pointer border-[1px] px-2",style:{width:50},children:e},e)))})}),(0,o.jsx)("button",{onClick:()=>{if(ie.current){const e=ne+50;de(e),ie.current.scrollTo({left:e,behavior:"smooth"})}},className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 mb-2 rounded-md ml-2",disabled:ne>=(null===(r=ie.current)||void 0===r?void 0:r.scrollWidth)-(null===(c=ie.current)||void 0===c?void 0:c.clientWidth),children:">"})]})})]})]})]})}},7309:(e,t,r)=>{r.d(t,{A:()=>n});var s=r(6213),a=r(5043),l=r(3986),i=r(579);function n(){const[e,t]=(0,a.useState)({name:"",GSTIN:"",mobile:"",addresh:""}),[r,n]=(0,a.useState)({}),[d,o]=(0,a.useState)(""),c=r=>{t({...e,[r.target.name]:r.target.value})},[u,m]=(0,a.useState)(!1),x=()=>{m(!0)};return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:" ",children:[(0,i.jsx)("div",{className:"App",children:(0,i.jsx)(l.A,{show:u,onClose:()=>{m(!1)},message:d})}),(0,i.jsxs)("div",{className:"mt-4 lg:w-full",children:[(0,i.jsxs)("div",{className:"bg-[#f2f2f2] grid md:grid-cols-2 text-black px-2 gap-6 md:gap-12 items-center",children:[(0,i.jsxs)("div",{className:"relative w-[100%]",children:[(0,i.jsx)("input",{type:"text",name:"name",onChange:c,value:e.name,placeholder:"Supplier name",className:"px-3 w-[100%] py-1 border-[2px] rounded-md "+(r.name?"border-red-500":"border-black")}),r.name&&(0,i.jsx)("p",{className:"text-red-500 text-sm absolute top-full left-0",children:r.name})]}),(0,i.jsxs)("div",{className:"relative w-[100%]",children:[(0,i.jsx)("input",{type:"text",name:"GSTIN",onChange:c,value:e.GSTIN,placeholder:"GSTIN",className:"px-3 py-1 w-[100%] border-[2px] rounded-md "+(r.GSTIN?"border-red-500":"border-black")}),r.GSTIN&&(0,i.jsx)("p",{className:"text-red-500 text-sm absolute top-full left-0",children:r.GSTIN})]}),(0,i.jsxs)("div",{className:"relative w-[100%]",children:[(0,i.jsx)("input",{type:"text",name:"mobile",onChange:c,value:e.mobile,placeholder:"Mobile",className:"px-3 py-1 w-[100%] border-[2px] rounded-md "+(r.mobile?"border-red-500":"border-black")}),r.mobile&&(0,i.jsx)("p",{className:"text-red-500 text-sm absolute top-full left-0",children:r.mobile})]}),(0,i.jsxs)("div",{className:"relative w-[100%]",children:[(0,i.jsx)("input",{type:"text",name:"addresh",onChange:c,value:e.addresh,placeholder:"Address",className:"px-3 py-1 w-[100%] border-[2px] rounded-md "+(r.addresh?"border-red-500":"border-black")}),r.addresh&&(0,i.jsx)("p",{className:"text-red-500 text-sm absolute top-full left-0",children:r.addresh})]})]}),(0,i.jsx)("div",{className:"flex justify-center mt-5 w-full",children:(0,i.jsx)("button",{onClick:async()=>{const r=(()=>{const t={};return e.name||(t.name="Supplier name is required"),e.GSTIN||(t.GSTIN="GSTIN is required"),e.mobile||(t.mobile="Mobile number is required"),e.addresh||(t.addresh="Address is required"),t})();if(Object.keys(r).length)n(r);else try{const{name:r,GSTIN:a,mobile:l,addresh:n}=e,d=localStorage.getItem("token");await s.A.post("https://bwithf.onrender.com/api/supplier/addsupplier",{name:r,GSTIN:a,mobile:l,addresh:n},{headers:{authtoken:d}}).then((e=>{e.data.success?(o((0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("p",{className:"text-green-600 font-semibold text-lg mb-2",children:e.data.message}),(0,i.jsx)("div",{className:"relative w-full h-2 rounded-full overflow-hidden bg-green-200 mt-4",children:(0,i.jsx)("div",{className:"absolute top-0 left-0 h-full bg-green-500 animate-progress-bar2",style:{animationDuration:"0.5s"}})})]})),x(),t({name:"",GSTIN:"",mobile:"",addresh:""})):(o((0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("p",{className:"text-red-600 font-semibold text-lg mb-2",children:e.data.message}),(0,i.jsx)("div",{className:"relative w-full h-2 rounded-full overflow-hidden bg-red-200 mt-4",children:(0,i.jsx)("div",{className:"absolute top-0 left-0 h-full bg-red-500 animate-progress-bar2",style:{animationDuration:"0.5s"}})})]})),x())})).catch((e=>console.log(e)))}catch(a){console.error("Error:",a)}},className:"bg-blue-500 text-white font-bold py-2 px-4 w-[50%] rounded hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50",children:"Add Supplier"})})]})]})})}},5948:(e,t,r)=>{r.d(t,{A:()=>d});var s=r(6213),a=r(5043),l=r(5369),i=r(2684),n=r(579);function d(e){var t,r,d;const[o,c]=(0,a.useState)([]),[u,m]=(0,a.useState)(!0),[x,p]=(0,a.useState)(null),[h,b]=(0,a.useState)(!1),[g,v]=(0,a.useState)(1),[f,j]=(0,a.useState)(""),[N,y]=(0,a.useState)(!0),[w,S]=(0,a.useState)(null),[k,C]=(0,a.useState)({name:"",GSTIN:"",Mobile:"",address:""}),q="https://bwithf.onrender.com",{userrole:P}=(0,a.useContext)(i.A);(0,a.useEffect)((()=>{A(g)}),[]);const A=async e=>{let t=localStorage.getItem("token");try{var r;const a=await s.A.get(`${q}/api/supplier/fetchsupplier/${e}`,{method:"GET",headers:{"Content-Type":"application/json",authtoken:t}});console.log(a.data),j(a.data.totalCount),0===(null===(r=a.data.supplierdata)||void 0===r?void 0:r.length)?(y(!1),c(a.data)):(c(a.data),y(!0)),m(!1)}catch(x){p(x),m(!1)}};const E=e=>{let t=localStorage.getItem("token");s.A.delete(`${q}/api/supplier/delete/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json",authtoken:t}}).then((()=>{c((t=>({...t,supplier:t.supplier.filter((t=>t._id!==e))})))})).catch((e=>{console.error("There was an error deleting the supplier!",e)}))},M=e=>{const{name:t,value:r}=e.target;C((e=>({...e,[t]:r})))},I=()=>{g>1&&v((e=>{const t=e-1;return A(t),t}))},T=()=>{Math.ceil(f/20),N&&v((e=>{const t=e+1;return A(t),t}))},R=Math.ceil(f/20),_=(0,a.useRef)(null),[$,L]=(0,a.useState)(0);return u?(0,n.jsx)("p",{children:"Loading..."}):x?(0,n.jsxs)("p",{children:["Error: ",x.message]}):(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:" ",children:[(0,n.jsxs)("div",{className:"mt-4 lg:w-full  h-[500px] overflow-y-scroll w-[1000px]",children:[(0,n.jsxs)("div",{className:"bg-[#464646] flex text-white mb-2 px-2 items-center justify-between",children:[(0,n.jsx)("div",{className:"border-white px-3 py-1 w-[160px]",children:"Name"}),(0,n.jsx)("div",{className:"border-white border-l-[1px] px-3 py-1 w-[160px]",children:"GSTIN"}),(0,n.jsx)("div",{className:"border-l-[1px] border-white w-[120px] px-3 py-1",children:"Mobile No"}),(0,n.jsx)("div",{className:"border-l-[1px] border-white w-[130px] px-3 py-1",children:"Address"}),(0,n.jsx)("div",{className:"border-l-[1px] border-white w-[80px] px-3 py-1",children:"Actions"})]}),null===o||void 0===o||null===(t=o.supplierdata)||void 0===t?void 0:t.map((e=>(0,n.jsx)("div",{className:"bg-[#f2f2f2] flex mt-1 text-black px-2 justify-between items-center",children:w===e._id?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("input",{type:"text",name:"name",value:k.name,onChange:M,className:"px-3 py-1 w-[160px] border"}),(0,n.jsx)("input",{type:"text",name:"GSTIN",value:k.GSTIN,onChange:M,className:"px-3 py-1 w-[160px] border"}),(0,n.jsx)("input",{type:"text",name:"Mobile",value:k.Mobile,onChange:M,className:"w-[120px] px-3 py-1 border"}),(0,n.jsx)("input",{type:"text",name:"address",value:k.address,onChange:M,className:"w-[130px] px-3 py-1 border"}),(0,n.jsx)("button",{onClick:()=>(e=>{let t=localStorage.getItem("token");s.A.put(`${q}/api/supplier/update/${e}`,k,{headers:{"Content-Type":"application/json",authtoken:t}}).then((()=>{c((t=>({...t,supplierdata:t.supplierdata.map((t=>t._id===e?{...t,...k}:t))}))),S(null)})).catch((e=>{console.error("There was an error updating the supplier!",e)}))})(e._id),className:"px-3 py-1 bg-green-500 text-white",children:"Save"})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"px-3 py-1 w-[160px]",children:e.name}),(0,n.jsx)("div",{className:"px-3 py-1 w-[160px]",children:e.GSTIN}),(0,n.jsx)("div",{className:"w-[120px] px-3 py-1",children:e.Mobile}),(0,n.jsx)("div",{className:"w-[130px] px-3 py-1",children:e.addresh}),(0,n.jsxs)("div",{className:"flex space-x-2",children:[P.canEdit&&(0,n.jsx)("button",{onClick:()=>(e=>{S(e._id),C({name:e.name,GSTIN:e.GSTIN,Mobile:e.Mobile,address:e.addresh})})(e),className:"px-3 py-1 bg-blue-500 text-white",children:"Edit"}),P.canDelete&&(0,n.jsx)("button",{onClick:()=>{return t=e._id,void(window.confirm("Do you really want to delete?")&&E(t));var t},className:"px-3 py-1 bg-red-500 text-white",children:"Delete"})]})]})},e._id)))]}),(0,n.jsxs)("div",{className:"    absolute md:w-[80%]  lg:w-[85%]   w-[90%] mt-10    ",children:[(0,n.jsxs)("div",{className:"text-white w-[100%] pb-5 flex gap-10 justify-center ",children:[1!==g?(0,n.jsxs)("button",{onClick:()=>{I()},className:"bg-blue-600 hover:bg-blue-700 w-[120px]  flex    justify-center cursor-pointer px-3 rounded-md ",children:[" ",(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(l.vpL,{})," Previous"]})]}):(0,n.jsxs)("button",{disabled:!0,onClick:()=>{I()},className:"bg-blue-400   w-[120px]  flex    justify-center cursor-pointer px-3 rounded-md ",children:[" ",(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(l.vpL,{})," Previous"]})]}),(0,n.jsx)("div",{className:"text-black border-black border-[1px] px-2 rounded-md",children:g}),g!==Math.ceil(f/20)&&0!==f?(0,n.jsxs)("button",{onClick:()=>{T()},className:"bg-blue-600 hover:bg-blue-700 w-[120px]  flex    justify-center cursor-pointer px-3 rounded-md ",children:[" ",(0,n.jsxs)("div",{className:"flex items-center gap-2",children:["Next",(0,n.jsx)(l.QyA,{})]})," "]}):(0,n.jsxs)("button",{disabled:!0,onClick:()=>{T()},className:"bg-blue-400   w-[120px]  flex    justify-center cursor-pointer px-3 rounded-md ",children:[" ",(0,n.jsxs)("div",{className:"flex items-center gap-2",children:["Next",(0,n.jsx)(l.QyA,{})]})," "]})]}),(0,n.jsx)("div",{className:"w-[100%] pb-5 flex gap-10  justify-center ",children:(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("button",{onClick:()=>{if(_.current){const e=$-50;L(e),_.current.scrollTo({left:e,behavior:"smooth"})}},className:"bg-blue-600 hover:bg-blue-700 text-white px-3 mb-2 py-1 rounded-md mr-2",disabled:$<=0,children:"<"}),(0,n.jsx)("div",{ref:_,className:"relative overflow-x-auto hide-scrollbar",style:{maxWidth:"150px",whiteSpace:"nowrap"},children:(0,n.jsx)("div",{className:"flex gap-2",children:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const s=[];for(let a=e;a<t;a+=r)s.push(a);return s}(1,R+1).map((e=>(0,n.jsx)("div",{onClick:()=>{(e=>{N&&v((t=>{const r=e;return A(r),r}))})(e)},className:"border-black text-center cursor-pointer border-[1px] px-2",style:{width:50},children:e},e)))})}),(0,n.jsx)("button",{onClick:()=>{if(_.current){const e=$+50;L(e),_.current.scrollTo({left:e,behavior:"smooth"})}},className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 mb-2 rounded-md ml-2",disabled:$>=(null===(r=_.current)||void 0===r?void 0:r.scrollWidth)-(null===(d=_.current)||void 0===d?void 0:d.clientWidth),children:">"})]})})]})]})})}}}]);
//# sourceMappingURL=487.3a203b2b.chunk.js.map