"use strict";(self.webpackChunkfooter=self.webpackChunkfooter||[]).push([[295],{7295:(e,t,r)=>{r.r(t),r.d(t,{default:()=>c});var s=r(6213),l=r(5043),a=r(5475),i=r(7149),o=r(2684),n=r(5369),d=r(579);function c(e){var t,r,c,x;const{updateOrderStatus:p,setexceldata:u,setsingleorderid:h}=(0,l.useContext)(o.A),[m,b]=(0,l.useState)(""),[v,j]=(0,l.useState)(""),[g,f]=(0,l.useState)(!1),[w,N]=(0,l.useState)(!0),[y,k]=(0,l.useState)([]),[S,C]=(0,l.useState)([]),[_,O]=(0,l.useState)(null),[R,T]=(0,l.useState)(1),[$,P]=(0,l.useState)(""),[L,E]=(0,l.useState)(!0);let[I,A]=(0,l.useState)({billno:"",billdate:"",LRNO:"",shippingcharges:"",Trackingid:"",Courier:"",Deliverybydate:"",Retrunstatus:"",Condition:""});const Q="http://127.0.0.1:5000";(0,l.useEffect)((()=>{M(R)}),[]);const D=()=>{R>1&&T((e=>{const t=e-1;return M(t),t}))},z=()=>{Math.ceil($/10),L&&T((e=>{const t=e+1;return M(t),t}))},M=async e=>{try{const r={authtoken:localStorage.getItem("token")},l=await s.A.get(`${Q}/api/order/fetchallordersforadmin/RTO/${e}`,{headers:r});var t;if(P(l.data.totalOrder),0===l.data.orders.length)E(!1),C(l.data);else u(null===l||void 0===l||null===(t=l.data)||void 0===t?void 0:t.orders),C(l.data),E(!0);N(!1)}catch(_){O(_),N(!1)}},[U,W]=(0,l.useState)(null),[Y,B]=(0,l.useState)(""),[F,H]=(0,l.useState)("");let J=(e,t)=>{b(e),k(t.returnserial),B(t.productdata),H(t.Quntity),f(!0),j(t._id)},q=async(e,t)=>{console.log(G.length),0!==G.length?(console.log(G),async function(e,t){try{let r=localStorage.getItem("token");const s=await fetch(`${Q}/api/order/matchserialnum/${t}/${I.Condition}`,{method:"POST",headers:{"Content-Type":"application/json",authtoken:r},body:JSON.stringify({serialNumbers:e})});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);return await s.json()}catch(_){throw console.error("Error:",_),_}}(G,t),await p(e,t,I)):(!async function(e,t){let r=localStorage.getItem("token");try{const s=await fetch(`${Q}/api/order/matchproductids/${t}/${I.Condition}`,{method:"POST",headers:{"Content-Type":"application/json",authtoken:r},body:JSON.stringify({productIds:e})});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);return await s.json()}catch(_){throw console.error("Error:",_),_}}(Z,t),await p(e,t,I)),M(R)};const[G,K]=(0,l.useState)([]),[V,X]=(0,l.useState)(""),[Z,ee]=(0,l.useState)({});console.log(Z);const te=Math.ceil($/10),re=(0,l.useRef)(null),[se,le]=(0,l.useState)(0),ae=e=>{A({...I,[e.target.name]:e.target.value})};return(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)("div",{className:" ",children:[g&&"Received"==m&&(0,d.jsx)("div",{className:" flex justify-center ",children:(0,d.jsxs)("div",{className:"w-[40%] bg-white shadow-xl shadow-gray-300 z-20 border-[1px] border-gray-300 py-5 my-6 rounded-md  absolute",children:[(0,d.jsx)("div",{onClick:()=>{f(!1)},className:"rounded-full cursor-pointer w-6 h-6 inline-block  ml-2  text-center justify-self-center border-black border-[1px] ",children:(0,d.jsx)("div",{className:"relative bottom-[7px] text-[20px]",children:"x"})}),(0,d.jsx)("div",{className:"flex justify-center py-2",children:(0,d.jsx)("div",{children:"Update some info"})}),(0,d.jsxs)("div",{className:"grid    md:grid-cols-1 text-black  px-2 gap-2 md:gap-3 items-center",children:[(0,d.jsxs)("select",{name:"Retrunstatus",onChange:ae,value:I.Retrunstatus,className:"px-3 py-1 border-black border-[2px] rounded-md",children:[(0,d.jsx)("option",{value:"Retrunstatus",children:"Retrunstatus"}),(0,d.jsx)("option",{value:"YES",children:"YES  "},"YES"),(0,d.jsx)("option",{value:"NO",children:"NO"},"NO")]}),(0,d.jsxs)("select",{name:"Condition",onChange:ae,value:I.Condition,className:"px-3 py-1 border-black border-[2px] rounded-md",children:[(0,d.jsx)("option",{value:"Condition",children:"Condition"}),(0,d.jsx)("option",{value:"ok",children:"Ok  "},"ok"),(0,d.jsx)("option",{value:"damaged",children:"Damaged"},"damaged"),(0,d.jsx)("option",{value:"partial",children:"Partial"},"partial"),(0,d.jsx)("option",{value:"fraud",children:"Fraud"},"fraud")]}),y?(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{children:"Serial Number Manager"}),(0,d.jsx)("input",{type:"text",value:V,onChange:e=>X(e.target.value),placeholder:"Enter serial number"}),(0,d.jsx)("button",{onClick:()=>{V&&y.includes(V)&&!G.includes(V)&&(K((e=>[...e,V])),X(""))},children:"Add Serial Number"}),(0,d.jsx)("ul",{children:null===G||void 0===G?void 0:G.map((e=>(0,d.jsxs)("li",{children:[e,(0,d.jsx)("button",{onClick:()=>{return t=e,void K((e=>e.filter((e=>e!==t))));var t},children:"Remove"})]},e)))})]}):(0,d.jsx)("div",{children:(0,d.jsx)("form",{className:"flex gap-2 flex-wrap",children:null===Y||void 0===Y?void 0:Y.map((e=>(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsxs)("label",{children:[(0,d.jsx)("input",{type:"checkbox",checked:void 0!==Z[e._id],onChange:()=>(e=>{ee((t=>{if(t[e]){const{[e]:r,...s}=t;return s}return{...t,[e]:1}}))})(e._id)}),e.name]}),void 0!==Z[e._id]&&(0,d.jsx)("input",{type:"number",value:Z[e._id],onChange:t=>((e,t)=>{F>=t&&ee((r=>({...r,[e]:t})))})(e._id,Number(t.target.value)),min:"1"})]},e._id)))})})]}),(0,d.jsx)("div",{className:"flex justify-center mt-1",children:(0,d.jsx)("button",{className:"text-[16px] bg-blue-600 rounded-full w-[50%] items-center mt-3  text-white px-2 py-[3px]",onClick:()=>{q(m,v)},children:"Update"})})]})}),(0,d.jsxs)("div",{className:"  mt-4 w-[1350px] h-[510px] ",children:[(0,d.jsxs)("div",{className:"bg-[#464646] flex sticky top-3 z-20  text-white mb-2  px-2 items-center ",children:[(0,d.jsx)("div",{className:" border-white  px-3 py-1  w-[160px] ",children:"Platform"}),(0,d.jsx)("div",{className:"border-l-[1px] border-white w-[120px]  px-3 py-1 ",children:"Bill NO"}),(0,d.jsx)("div",{className:"border-l-[1px] border-white w-[130px]  px-3 py-1 ",children:"Order Id"}),(0,d.jsx)("div",{className:"border-l-[1px] border-white w-[100px]  px-3 py-1 ",children:"Product"}),(0,d.jsx)("div",{className:"border-l-[1px] border-white w-[130px]  px-3 py-1 ",children:"Quntity"}),(0,d.jsx)("div",{className:"border-l-[1px] border-white w-[150px]  px-3 py-1 ",children:"Amount"}),(0,d.jsx)("div",{className:"border-l-[1px] border-white w-[100px]  px-3 py-1 ",children:"State"}),(0,d.jsx)("div",{className:"border-l-[1px] border-white w-[120px]  px-3 py-1 ",children:"Courier"}),(0,d.jsx)("div",{className:"border-l-[1px] border-white w-[180px]  px-3 py-1 ",children:"Tracking Id"}),(0,d.jsx)("div",{className:"border-l-[1px] border-white w-[120px]  px-3 py-1 ",children:"LR no."}),(0,d.jsx)("div",{className:"border-l-[1px] border-white w-[160px]  px-3 py-1 ",children:"Return Date"})]}),null===S||void 0===S||null===(t=S.orders)||void 0===t?void 0:t.map((e=>{let t=new Date(e.returndate).toLocaleDateString("en-IN",{year:"numeric",month:"2-digit",day:"2-digit"});return t=t.split("/").join("-"),(0,d.jsxs)("div",{className:"bg-[#f2f2f2] flex   text-black  px-2  items-center ",children:[(0,d.jsxs)(a.N_,{to:"/home/Searchpage",onClick:()=>h(e._id),className:" px-3 py-1 overflow-x-auto w-[160px] ",children:[e.Platform.name," "]}),(0,d.jsx)(a.N_,{to:"/home/Searchpage",onClick:()=>h(e._id),className:" w-[120px] overflow-x-auto px-3 py-1 ",children:e.Billno}),(0,d.jsx)(a.N_,{to:"/home/Searchpage",onClick:()=>h(e._id),className:" w-[130px] overflow-x-auto px-3 py-1 ",children:e.OrderId}),(0,d.jsx)(a.N_,{to:"/home/Searchpage",onClick:()=>h(e._id),className:" w-[100px] overflow-x-auto px-3 py-1 ",children:e.Product}),(0,d.jsx)(a.N_,{to:"/home/Searchpage",onClick:()=>h(e._id),className:" w-[100px] overflow-x-auto px-3 py-1 ",children:e.Quntity}),(0,d.jsx)(a.N_,{to:"/home/Searchpage",onClick:()=>h(e._id),className:" w-[150px] overflow-x-auto px-3 py-1 ",children:e.Salesamount}),(0,d.jsx)(a.N_,{to:"/home/Searchpage",onClick:()=>h(e._id),className:" w-[100px] overflow-x-auto px-3 py-1 ",children:e.State}),(0,d.jsx)(a.N_,{to:"/home/Searchpage",onClick:()=>h(e._id),className:" w-[180px] overflow-x-auto px-3 py-1 ",children:e.courier}),(0,d.jsx)(a.N_,{to:"/home/Searchpage",onClick:()=>h(e._id),className:" w-[140px] overflow-x-auto px-3 py-1 ",children:e.trackingnumber}),(0,d.jsx)(a.N_,{to:"/home/Searchpage",onClick:()=>h(e._id),className:" w-[120px] overflow-x-auto px-3 py-1 ",children:e.Lrno}),(0,d.jsx)(a.N_,{to:"/home/Searchpage",onClick:()=>h(e._id),className:" w-[160px] overflow-x-auto px-3 py-1 ",children:t}),U===e._id&&(0,d.jsx)("div",{className:" sticky right-0 flex gap-2     z-10",children:(0,d.jsxs)("div",{className:" top-[-19px]  absolute right-28  bg-white  border-black border-[1px] p-2  ",children:[(0,d.jsxs)("div",{className:"opstion  ",children:[(0,d.jsx)("option",{className:`text-[12px] cursor-pointer ${"Received"==m&&"bg-blue-400"}`,onClick:()=>{J("Received",e)},value:"pending",children:"Received"}),(0,d.jsx)("option",{className:`text-[12px] cursor-pointer ${"Lost"==m&&"bg-blue-400"}`,onClick:()=>{J("Lost",e)},value:"canceled",children:"Lost"})]}),"Lost"==m&&(0,d.jsx)("div",{className:"flex justify-center mt-1",children:(0,d.jsx)("button",{className:"text-[10px] bg-blue-600 rounded-full   items-center   text-white px-2  ",onClick:()=>{q(m,v)},children:"Update"})})]})}),(0,d.jsx)("div",{className:" sticky right-0 flex gap-2  bottom-2 z-10",children:(0,d.jsx)("div",{className:"bg-black rounded-full w-6 h-6 flex justify-center items-center  absolute bottom-3 right-16 text-white     text-[16px]  ",onClick:()=>(e=>{W((t=>t===e?null:e))})(e._id),children:(0,d.jsx)(i.Qxc,{})})})]},e._id)}))]}),(0,d.jsxs)("div",{className:"    absolute md:w-[80%]  lg:w-[85%]   w-[90%] mt-10    ",children:[(0,d.jsxs)("div",{className:"text-white w-[100%] pb-5 flex gap-10 justify-center ",children:[1!==R?(0,d.jsxs)("button",{onClick:()=>{D()},className:"bg-blue-600 hover:bg-blue-700 w-[120px]  flex    justify-center cursor-pointer px-3 rounded-md ",children:[" ",(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(n.vpL,{})," Previous"]})]}):(0,d.jsxs)("button",{disabled:!0,onClick:()=>{D()},className:"bg-blue-400   w-[120px]  flex    justify-center cursor-pointer px-3 rounded-md ",children:[" ",(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(n.vpL,{})," Previous"]})]}),(0,d.jsx)("div",{className:"text-black border-black border-[1px] px-2 rounded-md",children:R}),R!==Math.ceil($/10)&&0!==$?(0,d.jsxs)("button",{onClick:()=>{z()},className:"bg-blue-600 hover:bg-blue-700 w-[120px]  flex    justify-center cursor-pointer px-3 rounded-md ",children:[" ",(0,d.jsxs)("div",{className:"flex items-center gap-2",children:["Next",(0,d.jsx)(n.QyA,{})]})," "]}):(0,d.jsxs)("button",{disabled:!0,onClick:()=>{z()},className:"bg-blue-400   w-[120px]  flex    justify-center cursor-pointer px-3 rounded-md ",children:[" ",(0,d.jsxs)("div",{className:"flex items-center gap-2",children:["Next",(0,d.jsx)(n.QyA,{})]})," "]})]}),(0,d.jsx)("div",{className:"w-[100%] pb-5 flex gap-10  justify-center ",children:(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)("button",{onClick:()=>{if(re.current){const e=se-50;le(e),re.current.scrollTo({left:e,behavior:"smooth"})}},className:"bg-blue-600 hover:bg-blue-700 text-white px-3 mb-2 py-1 rounded-md mr-2",disabled:se<=0,children:"<"}),(0,d.jsx)("div",{ref:re,className:"relative overflow-x-auto hide-scrollbar",style:{maxWidth:"150px",whiteSpace:"nowrap"},children:(0,d.jsx)("div",{className:"flex gap-2",children:null===(r=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const s=[];for(let l=e;l<t;l+=r)s.push(l);return s}(1,te+1))||void 0===r?void 0:r.map((e=>(0,d.jsx)("div",{onClick:()=>{(e=>{L&&T((t=>{const r=e;return M(r),r}))})(e)},className:"border-black text-center cursor-pointer border-[1px] px-2",style:{width:50},children:e},e)))})}),(0,d.jsx)("button",{onClick:()=>{if(re.current){const e=se+50;le(e),re.current.scrollTo({left:e,behavior:"smooth"})}},className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 mb-2 rounded-md ml-2",disabled:se>=(null===(c=re.current)||void 0===c?void 0:c.scrollWidth)-(null===(x=re.current)||void 0===x?void 0:x.clientWidth),children:">"})]})})]})]})})}}}]);
//# sourceMappingURL=295.6c044847.chunk.js.map