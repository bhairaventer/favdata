"use strict";(self.webpackChunkfooter=self.webpackChunkfooter||[]).push([[3],{4003:(e,t,r)=>{r.r(t),r.d(t,{default:()=>n});var s=r(6213),l=r(5043),a=r(7149),o=r(5369),c=r(2684),d=r(579);function n(){var e,t,r,n;const[i,m]=(0,l.useState)([]),[x,u]=(0,l.useState)(!0),[h,b]=(0,l.useState)(null),[p,j]=(0,l.useState)(!1),[g,f]=(0,l.useState)(1),[v,N]=(0,l.useState)(""),[y,w]=(0,l.useState)(!0),{userrole:k}=(0,l.useContext)(c.A),[C,S]=(0,l.useState)({id:"",name:"",category:"",MRP:"",salingprice:"",othername:[]}),[E,A]=(0,l.useState)(""),[P,$]=(0,l.useState)([]),[L,M]=(0,l.useState)([]),T="https://bwithf.onrender.com",D=(0,l.useRef)(null),[I,R]=(0,l.useState)(0);(0,l.useEffect)((()=>{Q(g)}),[g]);const Q=async e=>{let t=localStorage.getItem("token");try{const r=await s.A.get(`${T}/api/combo/fetchcombosforadmin/${e}`,{method:"GET",headers:{authtoken:t}});N(r.data.totalCount),0===r.data.products.length?w(!1):(m(r.data),w(!0)),u(!1)}catch(h){b(h),u(!1)}},W=()=>{g>1&&f((e=>{const t=e-1;return Q(t),t}))},_=()=>{Math.ceil(v/20),y&&f((e=>{const t=e+1;return Q(t),t}))},z=()=>{E.trim()&&!P.includes(E.trim())&&($([...P,E.trim()]),S({...C,othername:[...P,E.trim()]}),A(""))};(0,l.useEffect)((()=>{(async()=>{try{let e=localStorage.getItem("token");const t=await s.A.get(`${T}/api/product/productnames`,{method:"GET",headers:{authtoken:e}});M(t.data)}catch(h){console.error("Error fetching products:",h)}})()}),[]);const G=Math.ceil(v/20),O=()=>{if(D.current){const e=I-50;R(e),D.current.scrollTo({left:e,behavior:"smooth"})}},U=()=>{if(D.current){const e=I+50;R(e),D.current.scrollTo({left:e,behavior:"smooth"})}};return x?(0,d.jsx)("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-50 backdrop-blur-md flex justify-center items-center z-50",children:(0,d.jsxs)("div",{className:"text-center text-white",children:[(0,d.jsx)("div",{className:"w-12 h-12 border-4 border-gray-300 border-t-blue-500 border-solid rounded-full mx-auto animate-spin"}),(0,d.jsx)("p",{className:"mt-4",children:"Loading..."})]})}):h?(0,d.jsxs)("p",{children:["Error: ",h.message]}):(0,d.jsxs)(d.Fragment,{children:[p&&(0,d.jsx)("div",{className:"flex absolute items-center md:w-[80%] lg:w-[85%] w-[90%] justify-center z-30",children:(0,d.jsxs)("div",{className:"bg-white p-2 rounded-md flex flex-col border-gray-500 border-[1px]",children:[(0,d.jsx)("div",{onClick:()=>j(!1),className:"rounded-full cursor-pointer w-6 h-6 inline-block ml-2 text-center border-black border-[1px]",children:(0,d.jsx)("div",{className:"relative bottom-[7px] text-[20px]",children:"x"})}),(0,d.jsxs)("div",{className:"grid md:grid-cols-2 grid-cols-1 mt-2",children:[(0,d.jsx)("input",{type:"text",name:"name",value:C.name,onChange:e=>{S({...C,[e.target.name]:e.target.value})},placeholder:"name",required:!0}),(0,d.jsxs)("div",{children:[(0,d.jsx)("input",{type:"text",onChange:e=>A(e.target.value),onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),z())},value:E,name:"serialNumbers",placeholder:"Enter othername",className:"px-3 py-1 w-[100%] border-black border-[2px] rounded-md"}),(0,d.jsx)("button",{type:"button",className:"w-[100px]",onClick:z,children:"Add name"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"flex"}),P.length>0&&(0,d.jsxs)("div",{className:"mt-4",children:[(0,d.jsx)("h2",{className:"font-bold",children:"Other names:"}),(0,d.jsx)("ul",{className:"grid gap-2 w-[50%] mt-2",children:null===P||void 0===P?void 0:P.map(((e,t)=>(0,d.jsxs)("li",{className:"flex gap-2 border-gray-400 border-[1px] rounded-md px-2 items-center justify-between",children:[e,(0,d.jsx)("button",{onClick:()=>(e=>{const t=P.filter((t=>t!==e));$(t),S({...C,othername:t})})(e),className:"text-red-500",children:"x"})]},t)))})]})]})]}),(0,d.jsx)("button",{onClick:async()=>{try{let e=localStorage.getItem("token");await s.A.put(`${T}/api/combo/updatecombo/${C.id}`,C,{method:"PUT",headers:{authtoken:e}}),Q(g),j(!1)}catch(h){alert("Error updating combo")}},children:"Update Combo"})]})}),(0,d.jsxs)("div",{className:"mt-4 lg:w-full h-[550px] w-[1000px]",children:[(0,d.jsxs)("div",{className:"bg-[#464646] flex text-white mb-2 px-4 py-2 rounded-md w-[100%] items-center",children:[(0,d.jsx)("div",{className:"text-lg font-semibold",children:"Combos List"}),(0,d.jsxs)("div",{className:"ml-auto",children:[g>1&&(0,d.jsx)("button",{onClick:O,children:(0,d.jsx)(o.vpL,{className:"text-2xl"})}),y&&(0,d.jsx)("button",{onClick:U,children:(0,d.jsx)(o.QyA,{className:"text-2xl"})})]})]}),(0,d.jsx)("div",{className:"overflow-auto  h-[500px] overflow-y-scroll",ref:D,children:(0,d.jsxs)("table",{className:"table-auto w-full border-collapse border border-gray-200",children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{className:"border border-gray-300 p-2",children:"Name"}),(0,d.jsx)("th",{className:"border border-gray-300 p-2",children:"Other Names"})]})}),(0,d.jsx)("tbody",{children:null===i||void 0===i||null===(e=i.products)||void 0===e?void 0:e.map((e=>(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{className:"border border-gray-300 p-2",children:e.name}),(0,d.jsx)("td",{className:"border border-gray-300 p-2",children:e.othername.join(", ")}),(0,d.jsxs)("td",{className:"border border-gray-300 p-2",children:[k.canEdit&&(0,d.jsx)("button",{onClick:()=>(e=>{S({id:e._id,name:e.name,category:e.category,MRP:e.MRP,salingprice:e.salingprice,othername:e.othername||[]}),$(e.othername||[]),j(!0)})(e),className:"text-blue-500",children:(0,d.jsx)(a.Yvo,{})}),k.canDelete&&(0,d.jsx)("button",{onClick:()=>(async e=>{let t=localStorage.getItem("token");if(window.confirm("Do you really want to delete?"))try{u(!0),await s.A.delete(`${T}/api/combo/deleteproduct/${e}`,{method:"DELETE",headers:{authtoken:t}}),await Q(g),u(!1)}catch(h){console.error(h)}})(e._id),className:"text-red-500 ml-2",children:(0,d.jsx)(a.b6i,{})})]})]},e._id)))})]})}),(0,d.jsxs)("div",{className:"    absolute md:w-[80%]  lg:w-[85%]   w-[90%] mt-10    ",children:[(0,d.jsxs)("div",{className:"text-white w-[100%] pb-5 flex gap-10 justify-center ",children:[1!==g?(0,d.jsxs)("button",{onClick:()=>{W()},className:"bg-blue-600 hover:bg-blue-700 w-[120px]  flex    justify-center cursor-pointer px-3 rounded-md ",children:[" ",(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(o.vpL,{})," Previous"]})]}):(0,d.jsxs)("button",{disabled:!0,onClick:()=>{W()},className:"bg-blue-400   w-[120px]  flex    justify-center cursor-pointer px-3 rounded-md ",children:[" ",(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(o.vpL,{})," Previous"]})]}),(0,d.jsx)("div",{className:"text-black border-black border-[1px] px-2 rounded-md",children:g}),g!==Math.ceil(v/20)&&0!==v?(0,d.jsxs)("button",{onClick:()=>{_()},className:"bg-blue-600 hover:bg-blue-700 w-[120px]  flex    justify-center cursor-pointer px-3 rounded-md ",children:[" ",(0,d.jsxs)("div",{className:"flex items-center gap-2",children:["Next",(0,d.jsx)(o.QyA,{})]})," "]}):(0,d.jsxs)("button",{disabled:!0,onClick:()=>{_()},className:"bg-blue-400   w-[120px]  flex    justify-center cursor-pointer px-3 rounded-md ",children:[" ",(0,d.jsxs)("div",{className:"flex items-center gap-2",children:["Next",(0,d.jsx)(o.QyA,{})]})," "]})]}),(0,d.jsx)("div",{className:"w-[100%] pb-5 flex gap-10  justify-center ",children:(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)("button",{onClick:O,className:"bg-blue-600 hover:bg-blue-700 text-white px-3 mb-2 py-1 rounded-md mr-2",disabled:I<=0,children:"<"}),(0,d.jsx)("div",{ref:D,className:"relative overflow-x-auto hide-scrollbar",style:{maxWidth:"150px",whiteSpace:"nowrap"},children:(0,d.jsx)("div",{className:"flex gap-2",children:null===(t=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const s=[];for(let l=e;l<t;l+=r)s.push(l);return s}(1,G+1))||void 0===t?void 0:t.map((e=>(0,d.jsx)("div",{onClick:()=>{(e=>{y&&f((t=>{const r=e;return Q(r),r}))})(e)},className:"border-black text-center cursor-pointer border-[1px] px-2",style:{width:50},children:e},e)))})}),(0,d.jsx)("button",{onClick:U,className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 mb-2 rounded-md ml-2",disabled:I>=(null===(r=D.current)||void 0===r?void 0:r.scrollWidth)-(null===(n=D.current)||void 0===n?void 0:n.clientWidth),children:">"})]})})]})]})]})}}}]);
//# sourceMappingURL=3.a59bdab1.chunk.js.map