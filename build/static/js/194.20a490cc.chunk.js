"use strict";(self.webpackChunkfooter=self.webpackChunkfooter||[]).push([[194],{2194:(e,s,t)=>{t.r(s),t.d(s,{default:()=>o});var r=t(6213),l=t(5043),i=t(5475),a=t(2684),n=t(5369),c=t(579);function o(e){var s,t,o;const{fetchSinglePurchase:d}=(0,l.useContext)(a.A),[u,x]=(0,l.useState)([]),[p,h]=(0,l.useState)(!0),[m,b]=(0,l.useState)(null),[v,f]=(0,l.useState)(1),[j,g]=(0,l.useState)(""),[w,N]=(0,l.useState)(!0);(0,l.useEffect)((()=>{S(v)}),[]);const y=()=>{v>1&&f((e=>{const s=e-1;return S(s),s}))},k=()=>{Math.ceil(j/20),w&&f((e=>{const s=e+1;return S(s),s}))},S=async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=localStorage.getItem("token");try{const l=await r.A.get(`https://backend-mqr6.onrender.com/api/purchase/fetchpurchase/${e}`,{method:"GET",headers:{authtoken:t},params:{search:s}});g(l.data.totalCount),0===l.data.purchase.length?(N(!1),x(l.data)):(x(l.data),N(!0)),h(!1)}catch(m){b(m),h(!1)}},[C,L]=(0,l.useState)(""),A=Math.ceil(j/20),P=(0,l.useRef)(null),[E,M]=(0,l.useState)(0);return p?(0,c.jsx)("p",{children:"Loading..."}):m?(0,c.jsxs)("p",{children:["Error: ",m.message]}):(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)("div",{className:" ",children:[(0,c.jsxs)("div",{className:"relative mt-4",children:[(0,c.jsx)("input",{type:"text",placeholder:"Search Purchase...",value:C,onChange:e=>{L(e.target.value),S(1,e.target.value)},className:"w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-200 ease-in-out"}),(0,c.jsx)("svg",{className:"absolute top-1/2 right-3 transform -translate-y-1/2 w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 4a7 7 0 011.2 13.794m1.2-1.794a7 7 0 01-1.2-13.794m1.2 13.794a7 7 0 100-14 7 7 0 000 14z"})})]}),(0,c.jsxs)("div",{className:"  mt-4 lg:w-full w-[1000px] h-[500px] overflow-y-scroll",children:[(0,c.jsxs)("div",{className:"bg-[#464646] flex   text-white mb-2  px-2 items-center justify-between",children:[(0,c.jsx)("div",{className:" border-white  px-3 py-1  w-[160px] ",children:"Bill Date"}),(0,c.jsx)("div",{className:" border-l-[1px]  border-white w-[120px]  px-3 py-1 ",children:"Bill No"}),(0,c.jsx)("div",{className:" border-white border-l-[1px] px-3 py-1  w-[160px] ",children:"supplier"}),(0,c.jsx)("div",{className:"border-l-[1px] border-white w-[130px]  px-3 py-1 ",children:"Amount"})]}),null===u||void 0===u||null===(s=u.purchase)||void 0===s?void 0:s.map((e=>{let s=0;null===e||void 0===e||e.name.forEach((e=>{s+=parseInt(e.amount)}));let t=new Date(null===e||void 0===e?void 0:e.billdate).toLocaleDateString("en-IN",{year:"numeric",month:"2-digit",day:"2-digit"});return t=t.split("/").join("-"),(0,c.jsx)(i.N_,{onClick:()=>{d(e._id)},to:"../SinglePurchase",className:"rounded-full   child cursor-pointer",children:(0,c.jsxs)("div",{className:"bg-[#f2f2f2] flex mt-1  text-black cursor-pointer px-2 justify-between items-center ",children:[(0,c.jsx)("div",{className:"  px-3 py-1  w-[160px] ",children:t}),(0,c.jsx)("div",{className:" w-[120px]  px-3 py-1 ",children:null===e||void 0===e?void 0:e.billno}),(0,c.jsxs)("div",{className:"  px-3 py-1  w-[160px] ",children:[null===e||void 0===e?void 0:e.Supplier," "]}),(0,c.jsx)("div",{className:" w-[130px]  px-3 py-1 ",children:s})]})},e._id)}))]}),(0,c.jsxs)("div",{className:"    absolute md:w-[80%]  lg:w-[85%]   w-[90%] mt-10    ",children:[(0,c.jsxs)("div",{className:"text-white w-[100%] pb-5 flex gap-10 justify-center ",children:[1!==v?(0,c.jsxs)("button",{onClick:()=>{y()},className:"bg-blue-600 hover:bg-blue-700 w-[120px]  flex    justify-center cursor-pointer px-3 rounded-md ",children:[" ",(0,c.jsxs)("div",{className:"flex items-center gap-2",children:[(0,c.jsx)(n.vpL,{})," Previous"]})]}):(0,c.jsxs)("button",{disabled:!0,onClick:()=>{y()},className:"bg-blue-400   w-[120px]  flex    justify-center cursor-pointer px-3 rounded-md ",children:[" ",(0,c.jsxs)("div",{className:"flex items-center gap-2",children:[(0,c.jsx)(n.vpL,{})," Previous"]})]}),(0,c.jsx)("div",{className:"text-black border-black border-[1px] px-2 rounded-md",children:v}),v!==Math.ceil(j/20)&&0!==j?(0,c.jsxs)("button",{onClick:()=>{k()},className:"bg-blue-600 hover:bg-blue-700 w-[120px]  flex    justify-center cursor-pointer px-3 rounded-md ",children:[" ",(0,c.jsxs)("div",{className:"flex items-center gap-2",children:["Next",(0,c.jsx)(n.QyA,{})]})," "]}):(0,c.jsxs)("button",{disabled:!0,onClick:()=>{k()},className:"bg-blue-400   w-[120px]  flex    justify-center cursor-pointer px-3 rounded-md ",children:[" ",(0,c.jsxs)("div",{className:"flex items-center gap-2",children:["Next",(0,c.jsx)(n.QyA,{})]})," "]})]}),(0,c.jsx)("div",{className:"w-[100%] pb-5 flex gap-10  justify-center ",children:(0,c.jsxs)("div",{className:"flex items-center",children:[(0,c.jsx)("button",{onClick:()=>{if(P.current){const e=E-50;M(e),P.current.scrollTo({left:e,behavior:"smooth"})}},className:"bg-blue-600 hover:bg-blue-700 text-white px-3 mb-2 py-1 rounded-md mr-2",disabled:E<=0,children:"<"}),(0,c.jsx)("div",{ref:P,className:"relative overflow-x-auto hide-scrollbar",style:{maxWidth:"150px",whiteSpace:"nowrap"},children:(0,c.jsx)("div",{className:"flex gap-2",children:function(e,s){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const r=[];for(let l=e;l<s;l+=t)r.push(l);return r}(1,A+1).map((e=>(0,c.jsx)("div",{onClick:()=>{(e=>{w&&f((s=>{const t=e;return S(t),t}))})(e)},className:"border-black text-center cursor-pointer border-[1px] px-2",style:{width:50},children:e},e)))})}),(0,c.jsx)("button",{onClick:()=>{if(P.current){const e=E+50;M(e),P.current.scrollTo({left:e,behavior:"smooth"})}},className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 mb-2 rounded-md ml-2",disabled:E>=(null===(t=P.current)||void 0===t?void 0:t.scrollWidth)-(null===(o=P.current)||void 0===o?void 0:o.clientWidth),children:">"})]})})]})]})})}}}]);
//# sourceMappingURL=194.20a490cc.chunk.js.map