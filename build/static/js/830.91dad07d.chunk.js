"use strict";(self.webpackChunkfooter=self.webpackChunkfooter||[]).push([[830],{2830:(e,t,r)=>{r.r(t),r.d(t,{default:()=>x});var a=r(5043),o=r(3216),s=r(5475),n=r(6213),d=r(2684),l=r(579);function c(){const e="https://bwithf.onrender.com",[t,r]=(0,a.useState)({Platform:"",OrderId:"",Product:"",Quntity:"",TransferPrice:"",SalesAmount:"",Tax:"",Paymentmode:"",Address:"",Pincode:"",State:"",MobNo:"",Dispatchbydate:"",orderdate:""}),{products:o,fetchProducts:s,fetchcomboProducts:c,comboProducts:i}=(0,a.useContext)(d.A),[m,u]=(0,a.useState)(""),[x,h]=(0,a.useState)([]),[p,b]=(0,a.useState)([]),[g,f]=(0,a.useState)(!0),[y,N]=(0,a.useState)(null),[j,v]=(0,a.useState)(!1),[P,S]=(0,a.useState)({});(0,a.useEffect)((()=>{s(),c()}),[]);(0,a.useEffect)((()=>{var e;let t=null===o||void 0===o||null===(e=o.productNames)||void 0===e?void 0:e.concat(i);h(m?t.filter((e=>e.toLowerCase().includes(m.toLowerCase()))):[])}),[m,o,i]);const w=e=>{const{name:t,value:a}=e.target;r((e=>({...e,[t]:a})))},k=t=>{t.includes("+")?(async t=>{let r=localStorage.getItem("token");try{var a,o;const s=await n.A.get(`${e}/api/combo/fetchsinglecombo/${t}`,{method:"GET",headers:{authtoken:r}});u(null===s||void 0===s||null===(a=s.data)||void 0===a||null===(o=a.othername1)||void 0===o?void 0:o.name),v(!1)}catch(y){console.error("Error fetching combo products:",y)}})(t):(async t=>{let r=localStorage.getItem("token");try{var a,o;const s=await n.A.get(`${e}/api/product/fetchsingleproduct/${t}`,{method:"GET",headers:{authtoken:r}});u(null===s||void 0===s||null===(a=s.data)||void 0===a||null===(o=a.othername1)||void 0===o?void 0:o.name),v(!1)}catch(y){console.error("Error fetching products:",y)}})(t),h([])};(0,a.useEffect)((()=>{_()}),[]);const _=()=>{let t=localStorage.getItem("token");n.A.get(`${e}/api/Platform/fetchallPlatform`,{method:"GET",headers:{authtoken:t}}).then((e=>{f(!1),b(e.data)})).catch((e=>{N(e),f(!1)}))};return(0,l.jsxs)("div",{className:"container mx-auto p-4",children:[(0,l.jsx)("h1",{className:"text-2xl font-bold mb-2",children:"Create Order"}),(0,l.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"mb-2",children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Order Date"}),(0,l.jsx)("input",{type:"date",name:"orderdate",onChange:w,value:t.orderdate,className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),P.orderdate&&(0,l.jsx)("p",{className:"text-red-500 text-xs mt-1",children:P.orderdate})]}),(0,l.jsxs)("div",{className:"mb-2",children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Platform"}),(0,l.jsxs)("select",{name:"Platform",onChange:w,value:t.Platform,className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[(0,l.jsx)("option",{value:"",children:"Select Platform"}),p.map((e=>(0,l.jsx)("option",{value:e._id,children:e.name},e._id)))]}),P.Platform&&(0,l.jsx)("p",{className:"text-red-500 text-xs mt-1",children:P.Platform})]}),(0,l.jsxs)("div",{className:"mb-2",children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Order ID"}),(0,l.jsx)("input",{type:"text",name:"OrderId",onChange:w,value:t.OrderId,className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),P.OrderId&&(0,l.jsx)("p",{className:"text-red-500 text-xs mt-1",children:P.OrderId})]}),(0,l.jsxs)("div",{className:"mb-2 relative",children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product"}),(0,l.jsx)("input",{type:"text",onChange:e=>(e=>{u(e.target.value),v(!0)})(e),value:m,className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"Search product"}),j&&(0,l.jsx)("div",{className:"absolute bg-white border border-gray-300 rounded-md mt-1 h-[200px] overflow-scroll w-full z-10",children:x.map(((e,t)=>(0,l.jsx)("div",{className:"p-2 cursor-pointer hover:bg-gray-100",onClick:()=>k(e),children:e},t)))}),P.Product&&(0,l.jsx)("p",{className:"text-red-500 text-xs mt-1",children:P.Product})]}),(0,l.jsxs)("div",{className:"mb-2",children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity"}),(0,l.jsx)("input",{type:"text",name:"Quntity",onChange:w,value:t.Quntity,className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),P.Quntity&&(0,l.jsx)("p",{className:"text-red-500 text-xs mt-1",children:P.Quntity})]}),(0,l.jsxs)("div",{className:"mb-2",children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Transfer Price"}),(0,l.jsx)("input",{type:"text",name:"TransferPrice",onChange:w,value:t.TransferPrice,className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),P.TransferPrice&&(0,l.jsx)("p",{className:"text-red-500 text-xs mt-1",children:P.TransferPrice})]}),(0,l.jsxs)("div",{className:"mb-2",children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sales Amount"}),(0,l.jsx)("input",{type:"text",name:"SalesAmount",onChange:w,value:t.SalesAmount,className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),P.SalesAmount&&(0,l.jsx)("p",{className:"text-red-500 text-xs mt-1",children:P.SalesAmount})]}),(0,l.jsxs)("div",{className:"mb-2",children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tax"}),(0,l.jsx)("input",{type:"text",name:"Tax",onChange:w,value:t.Tax,className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),P.Tax&&(0,l.jsx)("p",{className:"text-red-500 text-xs mt-1",children:P.Tax})]}),(0,l.jsxs)("div",{className:"mb-2",children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Mode"}),(0,l.jsx)("input",{type:"text",name:"Paymentmode",onChange:w,value:t.Paymentmode,className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),P.Paymentmode&&(0,l.jsx)("p",{className:"text-red-500 text-xs mt-1",children:P.Paymentmode})]}),(0,l.jsxs)("div",{className:"mb-2",children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),(0,l.jsx)("input",{type:"text",name:"Address",onChange:w,value:t.Address,className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),P.Address&&(0,l.jsx)("p",{className:"text-red-500 text-xs mt-1",children:P.Address})]}),(0,l.jsxs)("div",{className:"mb-2",children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pincode"}),(0,l.jsx)("input",{type:"text",name:"Pincode",onChange:w,value:t.Pincode,className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),P.Pincode&&(0,l.jsx)("p",{className:"text-red-500 text-xs mt-1",children:P.Pincode})]}),(0,l.jsxs)("div",{className:"mb-2",children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State"}),(0,l.jsx)("input",{type:"text",name:"State",onChange:w,value:t.State,className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),P.State&&(0,l.jsx)("p",{className:"text-red-500 text-xs mt-1",children:P.State})]}),(0,l.jsxs)("div",{className:"mb-2",children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mobile No"}),(0,l.jsx)("input",{type:"text",name:"MobNo",onChange:w,value:t.MobNo,className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),P.MobNo&&(0,l.jsx)("p",{className:"text-red-500 text-xs mt-1",children:P.MobNo})]}),(0,l.jsxs)("div",{className:"mb-2",children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Dispatch By Date"}),(0,l.jsx)("input",{type:"date",name:"Dispatchbydate",onChange:w,value:t.Dispatchbydate,className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),P.Dispatchbydate&&(0,l.jsx)("p",{className:"text-red-500 text-xs mt-1",children:P.Dispatchbydate})]})]}),(0,l.jsx)("div",{className:"flex justify-center mt-5",children:(0,l.jsx)("button",{onClick:async()=>{const r=(()=>{const e={};return t.Platform||(e.Platform="Platform is required"),t.OrderId||(e.OrderId="Order ID is required"),m||(e.Product="Product is required"),t.Quntity&&!isNaN(t.Quntity)||(e.Quntity="Quantity must be a number"),t.TransferPrice&&!isNaN(t.TransferPrice)||(e.TransferPrice="Transfer Price must be a number"),t.SalesAmount&&!isNaN(t.SalesAmount)||(e.SalesAmount="Sales Amount must be a number"),t.Tax&&!isNaN(t.Tax)||(e.Tax="Tax must be a number"),t.Paymentmode||(e.Paymentmode="Payment mode is required"),t.Address||(e.Address="Address is required"),t.Pincode&&!isNaN(t.Pincode)||(e.Pincode="Pincode must be a number"),t.State||(e.State="State is required"),t.MobNo&&!isNaN(t.MobNo)||(e.MobNo="Mobile No must be a number"),t.Dispatchbydate||(e.Dispatchbydate="Dispatch by date is required"),t.orderdate||(e.orderdate="Order date is required"),e})();if(Object.keys(r).length>0)S(r);else try{let{Platform:r,OrderId:a,Quntity:o,TransferPrice:s,SalesAmount:d,Tax:l,Paymentmode:c,Address:i,Pincode:u,State:x,MobNo:h,Dispatchbydate:p,orderdate:b}=t;r=r.toString(),a=a.toString(),o=o.toString(),s=s.toString(),d=d.toString(),l=l.toString(),c=c.toString(),i=i.toString(),u=u.toString(),x=x.toString(),h=h.toString(),p=p.toString();let g=localStorage.getItem("token");await n.A.post(`${e}/api/order/addorders`,{Platform:r,OrderId:a,Product:m,Quntity:o,status:"neworder",TransferPrice:s,SalesAmount:d,orderdate:b,Tax:l,Paymentmode:c,Address:i,Pincode:u,State:x,MobNo:h,Dispatchbydate:p},{headers:{authtoken:g}}).then((e=>console.log("response.data"))).catch((e=>console.log(e)))}catch(y){console.error("Error:",y)}},className:"bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50",children:"Add Order"})})]})]})}var i=r(1238);function m(e){const[t,r]=(0,a.useState)([]),[o,s]=(0,a.useState)([]),[d,c]=(0,a.useState)([]),[m,u]=(0,a.useState)(!1),[x,h]=(0,a.useState)(null),p="https://bwithf.onrender.com";console.log(d);const b=async e=>{if(!e)return console.warn("Product is undefined or null"),null;const t=await(async e=>{let t=localStorage.getItem("token");try{var r,a;const o=await n.A.get(`${p}/api/product/fetchsingleproduct/${encodeURIComponent(e)}`,{method:"GET",headers:{authtoken:t}});return(null===o||void 0===o||null===(r=o.data)||void 0===r||null===(a=r.othername1)||void 0===a?void 0:a.name)||null}catch(x){return console.error("Error fetching product:",x),null}})(e),r=await(async e=>{try{var t,r;let a=localStorage.getItem("token");const o=await n.A.get(`${p}/api/combo/fetchsinglecombo/${encodeURIComponent(e)}`,{method:"GET",headers:{authtoken:a}});return(null===o||void 0===o||null===(t=o.data)||void 0===t||null===(r=t.othername1)||void 0===r?void 0:r.name)||null}catch(x){return console.error("Error fetching combo product:",x),null}})(e);return t||r},g=async e=>e?await(async e=>{let t=localStorage.getItem("token");try{var r;const a=await n.A.get(`${p}/api/platform/fetchplatform/${encodeURIComponent(e)}`,{method:"GET",headers:{authtoken:t}});return(null===a||void 0===a||null===(r=a.data)||void 0===r?void 0:r._id)||null}catch(x){return console.error("Error fetching platform:",x.message),console.error("Error config:",x.config),null}})(e):(console.warn("Platform is undefined or null"),null),f=async e=>{try{u(!0);const t=await(async e=>{const t=[];for(const r of e){if(!r.Product){console.warn("Product is missing in element:",r);continue}const e=await b(r.Product),a=await g(r.Platform);e?t.push({...r,Product:e,Platform:a}):console.warn(`Product ${r.Product} does not exist.`)}return t})(e);c(t),u(!1)}catch(t){console.error("Error in showdata:",t),h(t),u(!1)}};return(0,a.useEffect)((()=>{}),[]),(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{children:"Import File"}),(0,l.jsx)("input",{type:"file",onChange:e=>{const t=e.target.files[0],a=new FileReader;a.onload=e=>{const t=e.target.result,a=i.LF(t,{type:"binary"}),o=a.SheetNames[0],s=a.Sheets[o];let n=i.Wp.sheet_to_json(s);n=n.map((e=>{const t={};return Object.entries(e).forEach((e=>{let[r,a]=e;const o=r.replace(/ /g,"_").replace(/&/g,"").replace(/\./g,"");t[o]=a})),t}));const d=e=>{if(null==e||isNaN(e))return"";try{const t=i.tF.parse_date_code(e);if(!t)return"";const r=new Date(t.y,t.m-1,t.d),a=(r.getMonth()+1).toString().padStart(2,"0"),o=r.getDate().toString().padStart(2,"0");return`${a}/${o}/${r.getFullYear()}`}catch(x){return console.error("Date parsing error:",x),""}};console.log(n);const l=n.map((e=>({Platform:e.platform,OrderId:e.Order_Id,Product:e.Product,TransferPrice:Number(e.Price_inc_FKMP_Contribution_Subsidy),Salesamount:Number(e.Invoice_Amount),Quntity:Number(e.Quantity),Tax:e.IGST?`IGST ${e.IGST}%`:"NA",Paymentmode:"",Address:`${e.Address_Line_1||""}, ${e.Address_Line_2||""}`,Pincode:Number(e.PIN_Code),State:e.State,Dispatchbydate:d(e.Dispatch_by_date),Deliverybydate:d(e.Dispatch_After_date),shippingcharge:e.Shipping_and_Handling_Charges,shipdate:e.Ordered_On?d(e.Ordered_On):"",Billno:e.Invoice_No,Billdate:d(e.Invoice_Date),orderdate:d(e.Ordered_On),trackingnumber:e.Tracking_ID,status:"neworder"})));f(l),r(l)},a.readAsBinaryString(t)}}),(0,l.jsx)("input",{type:"file",onChange:e=>{const t=e.target.files[0],r=new FileReader;r.onload=e=>{const t=e.target.result,r=i.LF(t,{type:"binary"}),a=r.SheetNames[0],o=r.Sheets[a];let s=i.Wp.sheet_to_json(o);s=s.map((e=>{const t={};return Object.entries(e).forEach((e=>{let[r,a]=e;const o=r.replace(/ /g,"_").replace(/&/g,"").replace(/\./g,"");t[o]=a})),t}));const n=e=>{if(null==e||isNaN(e))return"";try{const t=i.tF.parse_date_code(e);if(!t)return"";const r=new Date(t.y,t.m-1,t.d),a=(r.getMonth()+1).toString().padStart(2,"0"),o=r.getDate().toString().padStart(2,"0");return`${a}/${o}/${r.getFullYear()}`}catch(x){return console.error("Date parsing error:",x),""}},d=s.map((e=>({Platform:e.Platform||null,OrderId:e.Order_ID,Product:e.Product,TransferPrice:Number(e.Shipping_Charges),Salesamount:e.Amount,Quntity:Number(e.Qty),Paymentmode:e.Payment_Mode||"",Address:`${e.Address||""},  `,Pincode:Number(e.Pincode),MobNo:e.MobNo||null,State:e.State,Dispatchbydate:n(" "),Deliverybydate:n(e.Delivery_Date),Condition:e.Order_State,shippingcharge:e.Shipping_Charges||0,refundCondition:e.refundCondition||"",refunddate:n(new Date),shipdate:e.Ordered_On?n(e.Ordered_On):"",productdata:e.productdata||null,OFDdate:e.OFDdate||"",courier:e.Courier||"",Billno:e.Bill_No,Billdate:n(e.Bill_Date),Lrno:e.LRNo||"",trackingnumber:e.Tracking_ID,status:"neworder"})));f(d)},r.readAsBinaryString(t)}}),0!==d.length&&(0,l.jsx)("button",{onClick:async()=>{try{const e={headers:{authtoken:localStorage.getItem("token")}};await n.A.post(`${p}/api/order/addmultiorders`,d,e),alert("Data Added Successfully")}catch(e){console.error("Error adding order:",e),alert("Error adding data")}},children:"Add Order"}),m&&(0,l.jsx)("p",{children:"Loading..."}),x&&(0,l.jsxs)("p",{children:["Error: ",x.message]}),(0,l.jsx)("div",{className:"h-[600px] p-6 border-[1px] border-gray-600 mt-3 rounded-md overflow-y-scroll",children:(0,l.jsx)("ul",{className:"flex gap-3 flex-wrap",children:d.map(((e,t)=>(0,l.jsxs)("li",{children:[e.Product," - Platform ID: ",e.Platform]},t)))})})]})}var u=r(2565);function x(e){document.body.style.backgroundColor="#f6f6f6";const t=(0,o.zy)();return(0,a.useEffect)((()=>{const e=document.querySelector(".topnavbar").querySelectorAll(".child");e.forEach((e=>{e.style.color="white",e.style.backgroundColor="#31344f"}));const r=Array.from(e).find((e=>e.getAttribute("href")===t.pathname));r&&(r.style.color="black",r.style.backgroundColor="#a0afc5")}),[t]),(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:" md:w-[85%] lg:w-[90%]  w-[100%] px-[20px] mt-16 ",children:[(0,l.jsxs)("div",{className:"flex justify-between text-white  w-[100%]",children:[(0,l.jsx)("div",{className:"lg:text-xl text-lg font-semibold",children:"Products"}),(0,l.jsxs)("div",{className:"flex lg:space-x-4 lg:text-sm text-[10px] space-x-2",children:[(0,l.jsx)(s.N_,{to:"/",children:"Dashboard"}),(0,l.jsx)(s.N_,{to:"/home/reports",children:"Reports"}),(0,l.jsx)("div",{children:" "})]})]}),(0,l.jsxs)("div",{className:"bg-[white] rounded-md mt-2 px-3 py-6",children:[(0,l.jsxs)("div",{className:"bg-[#31344f] flex gap-2 text-white p-3 rounded-md flex-wrap topnavbar",children:[(0,l.jsx)(s.N_,{to:"",className:"rounded-full text-black cursor-pointer child bg-[#a0afc5] px-2",children:"create order"}),(0,l.jsx)(s.N_,{to:"./importorder",className:"rounded-full text-black cursor-pointer child bg-[#a0afc5] px-2",children:"import orders"})]}),(0,l.jsxs)(o.BV,{children:[(0,l.jsx)(o.qh,{path:"/",element:(0,l.jsx)(c,{})}),(0,l.jsx)(o.qh,{path:"importorder",element:(0,l.jsx)(m,{})}),(0,l.jsx)(o.qh,{path:"*",element:(0,l.jsx)(u.default,{})})]}),(0,l.jsx)("style",{jsx:!0,children:"\n        .scroll-container::-webkit-scrollbar {\n          width: 10px;\n          height: 10px;\n         \n         }\n        .scroll-container::-webkit-scrollbar-track {\n          background: white;\n          border: 1px #888888 solid\n         }\n        .scroll-container::-webkit-scrollbar-thumb {\n          background: #888;\n          border-radius: 10px\n        }\n        .scroll-container::-webkit-scrollbar-thumb:hover {\n          background: #555;\n        }\n      "})]})]})})}}}]);
//# sourceMappingURL=830.91dad07d.chunk.js.map